import{d as K,r as m,c as L,b as c,e,f as t,h as r,i as O,m as n,t as w,_ as Q}from"./index-97e706ba.js";const W={class:"emergency-container"},X={class:"page-header"},Y={class:"drill-header"},Z=K({__name:"Emergency",setup(ee){const v=m({type:"",status:""}),S=m([{code:"EP2024001",name:"航空器故障应急预案",type:"special",version:"V2.0",updateDate:"2024-01-01",status:"在用",scope:"适用于航空器发生故障时的应急处置",content:`1. 应急响应程序
2. 处置流程
3. 职责分工`,departments:["safety","operation","maintenance"],attachments:[{name:"应急预案文件.pdf",url:"#"},{name:"流程图.pdf",url:"#"}]}]),T=m([{date:"2024-02-15",type:"桌面演练",participants:"安全监察部、运行控制部",leader:"张三",result:"通过",summary:"演练达到预期目标，发现并整改3个问题点"}]),f=m(!1),g=m(!1),_=m("add"),k=m(null),o=m({name:"",type:"",version:"",scope:"",content:"",departments:[],attachments:[]}),h=d=>({comprehensive:"综合预案",special:"专项预案",onsite:"现场处置方案"})[d]||d,B=d=>({在用:"success",修订中:"warning",已废止:"info"})[d]||"",M=()=>{},N=()=>{v.value={type:"",status:""}},A=()=>{_.value="add",o.value={name:"",type:"",version:"",scope:"",content:"",departments:[],attachments:[]},f.value=!0},I=d=>{_.value="edit",o.value={...d},f.value=!0},R=d=>{k.value=d},z=d=>{ElMessageBox.confirm("确认删除该预案？","提示",{type:"warning"})},F=d=>{k.value=d,g.value=!0},P=()=>{},j=d=>{},q=()=>{f.value=!1,ElMessage.success(_.value==="add"?"新增成功":"编辑成功")},G=d=>{ElMessage.success("上传成功")},H=()=>{ElMessage.error("上传失败")};return(d,l)=>{var $;const u=r("el-button"),p=r("el-option"),y=r("el-select"),i=r("el-form-item"),C=r("el-form"),x=r("el-card"),s=r("el-table-column"),E=r("el-tag"),U=r("el-table"),b=r("el-input"),J=r("el-upload"),D=r("el-dialog");return O(),L("div",W,[c("div",X,[l[12]||(l[12]=c("h2",null,"应急预案协调",-1)),e(u,{type:"primary",onClick:A},{default:t(()=>l[11]||(l[11]=[n("新增预案")])),_:1})]),e(x,{class:"search-card"},{default:t(()=>[e(C,{inline:!0,model:v.value},{default:t(()=>[e(i,{label:"预案类型"},{default:t(()=>[e(y,{modelValue:v.value.type,"onUpdate:modelValue":l[0]||(l[0]=a=>v.value.type=a),placeholder:"请选择预案类型"},{default:t(()=>[e(p,{label:"综合预案",value:"comprehensive"}),e(p,{label:"专项预案",value:"special"}),e(p,{label:"现场处置方案",value:"onsite"})]),_:1},8,["modelValue"])]),_:1}),e(i,{label:"预案状态"},{default:t(()=>[e(y,{modelValue:v.value.status,"onUpdate:modelValue":l[1]||(l[1]=a=>v.value.status=a),placeholder:"请选择状态"},{default:t(()=>[e(p,{label:"在用",value:"active"}),e(p,{label:"修订中",value:"revising"}),e(p,{label:"已废止",value:"obsolete"})]),_:1},8,["modelValue"])]),_:1}),e(i,null,{default:t(()=>[e(u,{type:"primary",onClick:M},{default:t(()=>l[13]||(l[13]=[n("查询")])),_:1}),e(u,{onClick:N},{default:t(()=>l[14]||(l[14]=[n("重置")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(x,{class:"content-card"},{default:t(()=>[e(U,{data:S.value,border:"",style:{width:"100%"}},{default:t(()=>[e(s,{prop:"code",label:"预案编号",width:"120"}),e(s,{prop:"name",label:"预案名称"}),e(s,{prop:"type",label:"预案类型",width:"120"},{default:t(({row:a})=>[n(w(h(a.type)),1)]),_:1}),e(s,{prop:"version",label:"版本号",width:"100"}),e(s,{prop:"updateDate",label:"更新日期",width:"180"}),e(s,{prop:"status",label:"状态",width:"100"},{default:t(({row:a})=>[e(E,{type:B(a.status)},{default:t(()=>[n(w(a.status),1)]),_:2},1032,["type"])]),_:1}),e(s,{label:"操作",width:"280",fixed:"right"},{default:t(({row:a})=>[e(u,{link:"",type:"primary",onClick:V=>R(a)},{default:t(()=>l[15]||(l[15]=[n("查看")])),_:2},1032,["onClick"]),e(u,{link:"",type:"primary",onClick:V=>I(a)},{default:t(()=>l[16]||(l[16]=[n("编辑")])),_:2},1032,["onClick"]),e(u,{link:"",type:"success",onClick:V=>F(a)},{default:t(()=>l[17]||(l[17]=[n("演练记录")])),_:2},1032,["onClick"]),e(u,{link:"",type:"danger",onClick:V=>z(a)},{default:t(()=>l[18]||(l[18]=[n("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1}),e(D,{modelValue:f.value,"onUpdate:modelValue":l[9]||(l[9]=a=>f.value=a),title:_.value==="add"?"新增预案":"编辑预案",width:"60%"},{footer:t(()=>[e(u,{onClick:l[8]||(l[8]=a=>f.value=!1)},{default:t(()=>l[21]||(l[21]=[n("取消")])),_:1}),e(u,{type:"primary",onClick:q},{default:t(()=>l[22]||(l[22]=[n("确定")])),_:1})]),default:t(()=>[e(C,{ref:"formRef",model:o.value,"label-width":"100px"},{default:t(()=>[e(i,{label:"预案名称",prop:"name"},{default:t(()=>[e(b,{modelValue:o.value.name,"onUpdate:modelValue":l[2]||(l[2]=a=>o.value.name=a),placeholder:"请输入预案名称"},null,8,["modelValue"])]),_:1}),e(i,{label:"预案类型",prop:"type"},{default:t(()=>[e(y,{modelValue:o.value.type,"onUpdate:modelValue":l[3]||(l[3]=a=>o.value.type=a),placeholder:"请选择预案类型"},{default:t(()=>[e(p,{label:"综合预案",value:"comprehensive"}),e(p,{label:"专项预案",value:"special"}),e(p,{label:"现场处置方案",value:"onsite"})]),_:1},8,["modelValue"])]),_:1}),e(i,{label:"版本号",prop:"version"},{default:t(()=>[e(b,{modelValue:o.value.version,"onUpdate:modelValue":l[4]||(l[4]=a=>o.value.version=a),placeholder:"请输入版本号"},null,8,["modelValue"])]),_:1}),e(i,{label:"适用范围",prop:"scope"},{default:t(()=>[e(b,{modelValue:o.value.scope,"onUpdate:modelValue":l[5]||(l[5]=a=>o.value.scope=a),type:"textarea",rows:"3",placeholder:"请输入适用范围"},null,8,["modelValue"])]),_:1}),e(i,{label:"预案内容",prop:"content"},{default:t(()=>[e(b,{modelValue:o.value.content,"onUpdate:modelValue":l[6]||(l[6]=a=>o.value.content=a),type:"textarea",rows:"6",placeholder:"请输入预案内容"},null,8,["modelValue"])]),_:1}),e(i,{label:"协调部门"},{default:t(()=>[e(y,{modelValue:o.value.departments,"onUpdate:modelValue":l[7]||(l[7]=a=>o.value.departments=a),multiple:"",placeholder:"请选择协调部门"},{default:t(()=>[e(p,{label:"安全监察部",value:"safety"}),e(p,{label:"运行控制部",value:"operation"}),e(p,{label:"维修工程部",value:"maintenance"})]),_:1},8,["modelValue"])]),_:1}),e(i,{label:"附件"},{default:t(()=>[e(J,{action:"/api/upload","on-success":G,"on-error":H},{tip:t(()=>l[20]||(l[20]=[c("div",{class:"el-upload__tip"}," 请上传预案文件、流程图等相关材料 ",-1)])),default:t(()=>[e(u,{type:"primary"},{default:t(()=>l[19]||(l[19]=[n("上传附件")])),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),e(D,{modelValue:g.value,"onUpdate:modelValue":l[10]||(l[10]=a=>g.value=a),title:`${($=k.value)==null?void 0:$.name} - 演练记录`,width:"70%"},{default:t(()=>[c("div",Y,[l[24]||(l[24]=c("h4",null,"演练记录列表",-1)),e(u,{type:"primary",size:"small",onClick:P},{default:t(()=>l[23]||(l[23]=[n(" 新增演练记录 ")])),_:1})]),e(U,{data:T.value,border:"",style:{width:"100%"}},{default:t(()=>[e(s,{prop:"date",label:"演练日期",width:"180"}),e(s,{prop:"type",label:"演练类型",width:"120"}),e(s,{prop:"participants",label:"参与部门"}),e(s,{prop:"leader",label:"演练负责人",width:"120"}),e(s,{prop:"result",label:"演练结果",width:"100"},{default:t(({row:a})=>[e(E,{type:a.result==="通过"?"success":"warning"},{default:t(()=>[n(w(a.result),1)]),_:2},1032,["type"])]),_:1}),e(s,{label:"操作",width:"150"},{default:t(({row:a})=>[e(u,{link:"",type:"primary",onClick:V=>j(a)},{default:t(()=>l[25]||(l[25]=[n(" 查看详情 ")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1},8,["modelValue","title"])])}}});const te=Q(Z,[["__scopeId","data-v-6e12452a"]]);export{te as default};
