import{B as A}from"./BaseLibrary-fa67d690.js";import{d as S,r as g,L as _,k as x,f as o,h as i,i as B,e,m as f,t as C,_ as F}from"./index-97e706ba.js";const M=S({__name:"HazardLibrary",setup(W){const k=g(),v=g(),s=_({keyword:"",code:"",name:"",category:"",system:"",riskValue:""}),t=_({code:"",name:"",category:"",system:"",primaryClass:"",secondaryClass:"",riskValue:"",controlCode:"",residualRiskValue:"",updateTime:""}),w={code:[{required:!0,message:"请输入危险源编号",trigger:"blur"}],name:[{required:!0,message:"请输入危险源名称",trigger:"blur"}],category:[{required:!0,message:"请选择分类",trigger:"change"}],system:[{required:!0,message:"请选择所属系统",trigger:"change"}],riskValue:[{required:!0,message:"请输入风险值",trigger:"blur"}],controlCode:[{required:!0,message:"请输入控制措施编号",trigger:"blur"}],residualRiskValue:[{required:!0,message:"请输入剩余风险值",trigger:"blur"}]},h=m=>({threat:"威胁",consequence:"后果"})[m]||m,T=m=>{const a=m.charAt(0);return{5:"danger",4:"danger",3:"warning",2:"warning",1:"success"}[a]||"info"},V=[{code:"T-FLT129",name:"航路和程序变化",category:"threat",system:"飞行运行 FLT",primaryClass:"外部威胁",secondaryClass:"空域",riskValue:"2C",controlCode:"D-FLT042",residualRiskValue:"1C",updateTime:"2022-05-10"},{code:"T-WX159",name:"技术指令《检查机载应急设备标准》中的工作步骤不明确",category:"threat",system:"机务维修 MNT",primaryClass:"程序",secondaryClass:"工作制度",riskValue:"3D",controlCode:"D-WX307",residualRiskValue:"1D",updateTime:"2022-04-19"},{code:"T-WX158",name:"工具租借过程中双方的使用和识别责任不清晰",category:"threat",system:"机务维修 MNT",primaryClass:"生产支援",secondaryClass:"工具管理",riskValue:"3D",controlCode:"D-WX306",residualRiskValue:"1D",updateTime:"2022-04-19"},{code:"T-WX157",name:"大风天气下飞机长时间设置停留刹车，可能导致刹车系统损坏",category:"threat",system:"机务维修 MNT",primaryClass:"航线维修",secondaryClass:"维修实施",riskValue:"3C",controlCode:"D-WX305",residualRiskValue:"1C",updateTime:"2022-04-19"}],y=g(V),L=()=>{const{keyword:m,code:a,name:u,category:r,system:p,riskValue:n}=s,c=V.filter(d=>{const b=!m||d.code.toLowerCase().includes(m.toLowerCase())||d.name.toLowerCase().includes(m.toLowerCase()),l=!a||d.code.toLowerCase().includes(a.toLowerCase()),D=!u||d.name.toLowerCase().includes(u.toLowerCase()),N=!r||d.category===r,U=!p||d.system.includes(p),q=!n||d.riskValue.startsWith(n);return b&&l&&D&&N&&U&&q});y.value=c},R=()=>{s.keyword="",s.code="",s.name="",s.category="",s.system="",s.riskValue="",y.value=V};return(m,a)=>{const u=i("el-input"),r=i("el-option"),p=i("el-select"),n=i("el-table-column"),c=i("el-tag"),d=i("el-form-item"),b=i("el-form");return B(),x(A,{ref_key:"libraryRef",ref:k,data:y.value,onSearch:L,onReset:R},{"extra-search":o(()=>[e(u,{modelValue:s.code,"onUpdate:modelValue":a[0]||(a[0]=l=>s.code=l),placeholder:"编号",clearable:"",class:"search-input"},null,8,["modelValue"]),e(u,{modelValue:s.name,"onUpdate:modelValue":a[1]||(a[1]=l=>s.name=l),placeholder:"危险源名称",clearable:"",class:"search-input"},null,8,["modelValue"]),e(p,{modelValue:s.category,"onUpdate:modelValue":a[2]||(a[2]=l=>s.category=l),placeholder:"分类",clearable:""},{default:o(()=>[e(r,{label:"威胁",value:"threat"}),e(r,{label:"后果",value:"consequence"})]),_:1},8,["modelValue"]),e(p,{modelValue:s.system,"onUpdate:modelValue":a[3]||(a[3]=l=>s.system=l),placeholder:"所属系统",clearable:""},{default:o(()=>[e(r,{label:"飞行运行 FLT",value:"FLT"}),e(r,{label:"机务维修 MNT",value:"MNT"}),e(r,{label:"地面保障 GND",value:"GND"}),e(r,{label:"运行控制 OPS",value:"OPS"}),e(r,{label:"客舱服务 CAB",value:"CAB"})]),_:1},8,["modelValue"]),e(p,{modelValue:s.riskValue,"onUpdate:modelValue":a[4]||(a[4]=l=>s.riskValue=l),placeholder:"风险值",clearable:""},{default:o(()=>[e(r,{label:"1A-1E",value:"1"}),e(r,{label:"2A-2E",value:"2"}),e(r,{label:"3A-3E",value:"3"}),e(r,{label:"4A-4E",value:"4"}),e(r,{label:"5A-5E",value:"5"})]),_:1},8,["modelValue"])]),columns:o(()=>[e(n,{prop:"code",label:"编号",width:"120"}),e(n,{prop:"name",label:"危险源名称","min-width":"200","show-overflow-tooltip":""}),e(n,{prop:"category",label:"分类",width:"100"},{default:o(({row:l})=>[f(C(h(l.category)),1)]),_:1}),e(n,{prop:"system",label:"所属系统",width:"120"}),e(n,{prop:"primaryClass",label:"一级分类",width:"120"}),e(n,{prop:"secondaryClass",label:"二级分类",width:"120"}),e(n,{prop:"riskValue",label:"风险值",width:"100"},{default:o(({row:l})=>[e(c,{type:T(l.riskValue)},{default:o(()=>[f(C(l.riskValue),1)]),_:2},1032,["type"])]),_:1}),e(n,{prop:"controlCode",label:"控制措施编号",width:"120"}),e(n,{prop:"residualRiskValue",label:"剩余风险值",width:"100"},{default:o(({row:l})=>[e(c,{type:"success"},{default:o(()=>[f(C(l.residualRiskValue),1)]),_:2},1024)]),_:1}),e(n,{prop:"updateTime",label:"入库时间",width:"180"})]),form:o(()=>[e(b,{ref_key:"formRef",ref:v,model:t,rules:w,"label-width":"100px"},{default:o(()=>[e(d,{label:"危险源编号",prop:"code"},{default:o(()=>[e(u,{modelValue:t.code,"onUpdate:modelValue":a[5]||(a[5]=l=>t.code=l),placeholder:"请输入危险源编号"},null,8,["modelValue"])]),_:1}),e(d,{label:"危险源名称",prop:"name"},{default:o(()=>[e(u,{modelValue:t.name,"onUpdate:modelValue":a[6]||(a[6]=l=>t.name=l),placeholder:"请输入危险源名称"},null,8,["modelValue"])]),_:1}),e(d,{label:"分类",prop:"category"},{default:o(()=>[e(p,{modelValue:t.category,"onUpdate:modelValue":a[7]||(a[7]=l=>t.category=l),placeholder:"请选择分类"},{default:o(()=>[e(r,{label:"威胁",value:"threat"}),e(r,{label:"后果",value:"consequence"})]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"所属系统",prop:"system"},{default:o(()=>[e(p,{modelValue:t.system,"onUpdate:modelValue":a[8]||(a[8]=l=>t.system=l),placeholder:"请选择所属系统"},{default:o(()=>[e(r,{label:"飞行运行 FLT",value:"FLT"}),e(r,{label:"机务维修 MNT",value:"MNT"}),e(r,{label:"地面保障 GND",value:"GND"}),e(r,{label:"运行控制 OPS",value:"OPS"}),e(r,{label:"客舱服务 CAB",value:"CAB"})]),_:1},8,["modelValue"])]),_:1}),e(d,{label:"一级分类",prop:"primaryClass"},{default:o(()=>[e(u,{modelValue:t.primaryClass,"onUpdate:modelValue":a[9]||(a[9]=l=>t.primaryClass=l),placeholder:"请输入一级分类"},null,8,["modelValue"])]),_:1}),e(d,{label:"二级分类",prop:"secondaryClass"},{default:o(()=>[e(u,{modelValue:t.secondaryClass,"onUpdate:modelValue":a[10]||(a[10]=l=>t.secondaryClass=l),placeholder:"请输入二级分类"},null,8,["modelValue"])]),_:1}),e(d,{label:"风险值",prop:"riskValue"},{default:o(()=>[e(u,{modelValue:t.riskValue,"onUpdate:modelValue":a[11]||(a[11]=l=>t.riskValue=l),placeholder:"请输入风险值"},null,8,["modelValue"])]),_:1}),e(d,{label:"控制措施编号",prop:"controlCode"},{default:o(()=>[e(u,{modelValue:t.controlCode,"onUpdate:modelValue":a[12]||(a[12]=l=>t.controlCode=l),placeholder:"请输入控制措施编号"},null,8,["modelValue"])]),_:1}),e(d,{label:"剩余风险值",prop:"residualRiskValue"},{default:o(()=>[e(u,{modelValue:t.residualRiskValue,"onUpdate:modelValue":a[13]||(a[13]=l=>t.residualRiskValue=l),placeholder:"请输入剩余风险值"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["data"])}}});const G=F(M,[["__scopeId","data-v-34a3b2f6"]]);export{G as default};
