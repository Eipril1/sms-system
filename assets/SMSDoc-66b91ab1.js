import{d as H,r as c,h as a,i as C,c as U,b,e,f as l,v as le,A as te,m as s,t as w,E as G,z as P,_ as K,k as Y,p as q,F as ae,j as ne}from"./index-97e706ba.js";const oe={class:"regulation-manage"},de={class:"page-header"},ie={class:"pagination"},ue=H({__name:"RegulationManage",setup(O){const v=c({regNumber:"",regType:""}),f=c(1),V=c(10),x=c(0),B=c([{regNumber:"CCAR-121",regType:"CCAR",title:"大型飞机公共航空运输承运人运行合格审定规则",publishDate:"2024-01-01",status:"有效"}]),k=()=>{},y=()=>{v.value={regNumber:"",regType:""}},T=()=>{},m=R=>{},M=R=>{},E=R=>{},$=R=>{G.confirm("确认删除该规章？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{P.success("删除成功")})};return(R,n)=>{const o=a("el-icon"),_=a("el-button"),A=a("el-input"),h=a("el-form-item"),u=a("el-option"),t=a("el-select"),S=a("el-form"),F=a("el-card"),p=a("el-table-column"),z=a("el-tag"),D=a("el-table"),N=a("el-pagination");return C(),U("div",oe,[b("div",de,[e(_,{type:"primary",onClick:T},{default:l(()=>[e(o,null,{default:l(()=>[e(le(te))]),_:1}),n[4]||(n[4]=s(" 新增规章 "))]),_:1})]),e(F,{class:"search-card"},{default:l(()=>[e(S,{inline:!0,model:v.value},{default:l(()=>[e(h,{label:"规章编号"},{default:l(()=>[e(A,{modelValue:v.value.regNumber,"onUpdate:modelValue":n[0]||(n[0]=r=>v.value.regNumber=r),placeholder:"请输入规章编号",clearable:""},null,8,["modelValue"])]),_:1}),e(h,{label:"规章类型"},{default:l(()=>[e(t,{modelValue:v.value.regType,"onUpdate:modelValue":n[1]||(n[1]=r=>v.value.regType=r),placeholder:"请选择类型",clearable:""},{default:l(()=>[e(u,{label:"CCAR",value:"CCAR"}),e(u,{label:"AC",value:"AC"}),e(u,{label:"其他",value:"OTHER"})]),_:1},8,["modelValue"])]),_:1}),e(h,null,{default:l(()=>[e(_,{type:"primary",onClick:k},{default:l(()=>n[5]||(n[5]=[s("查询")])),_:1}),e(_,{onClick:y},{default:l(()=>n[6]||(n[6]=[s("重置")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(D,{data:B.value,border:"",style:{width:"100%"}},{default:l(()=>[e(p,{prop:"regNumber",label:"规章编号",width:"120"}),e(p,{prop:"regType",label:"规章类型",width:"100"}),e(p,{prop:"title",label:"规章标题"}),e(p,{prop:"publishDate",label:"发布日期",width:"120"}),e(p,{prop:"status",label:"状态",width:"100"},{default:l(({row:r})=>[e(z,{type:r.status==="有效"?"success":"info"},{default:l(()=>[s(w(r.status),1)]),_:2},1032,["type"])]),_:1}),e(p,{label:"操作",width:"250",fixed:"right"},{default:l(({row:r})=>[e(_,{type:"primary",link:"",onClick:g=>M(r)},{default:l(()=>n[7]||(n[7]=[s("查看")])),_:2},1032,["onClick"]),e(_,{type:"primary",link:"",onClick:g=>m(r)},{default:l(()=>n[8]||(n[8]=[s("编辑")])),_:2},1032,["onClick"]),e(_,{type:"primary",link:"",onClick:g=>E(r)},{default:l(()=>n[9]||(n[9]=[s("符合性声明")])),_:2},1032,["onClick"]),e(_,{type:"danger",link:"",onClick:g=>$(r)},{default:l(()=>n[10]||(n[10]=[s("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),b("div",ie,[e(N,{"current-page":f.value,"onUpdate:currentPage":n[2]||(n[2]=r=>f.value=r),"page-size":V.value,"onUpdate:pageSize":n[3]||(n[3]=r=>V.value=r),total:x.value,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper"},null,8,["current-page","page-size","total"])])])}}});const se=K(ue,[["__scopeId","data-v-0054e1d6"]]),pe={class:"compliance-check"},re={key:0,class:"main-content"},ce={class:"card-header"},me={class:"table-container"},_e={class:"compliance-cell"},fe={class:"compliance-ref"},ve={class:"clause-content"},be={key:1},ge={class:"dialog-footer"},ye=H({__name:"ComplianceCheck",setup(O){const v=c({regNumber:""}),f=c(""),V=c([]),x=c([]),B=async u=>{if(!u){V.value=[],x.value=[];return}try{u==="CCAR-121"&&(V.value=[{id:"1",label:"第一章 总则",children:[{id:"1.1",label:"1.1 目的",chapter:"1.目的",content:"本咨询通告依据中国民用航空规章..."},{id:"1.2",label:"1.2 适用范围",chapter:"2.适用范围",content:"本咨询通告适用于按照CCAR-121部运行的航空运营人..."}]}],x.value=[{chapter:"1.目的",content:"本咨询通告依据中国民用航空规章《大型飞机公共航空运输承运人运行合格审定规则》...",compliance:"compliant",complianceRef:"DY-1Y-03.1.1.1.1"},{chapter:"2.适用范围",content:"本咨询通告适用于按照CCAR-121部运行的航空运营人...",compliance:"partial",complianceRef:"DY-1Y-03.1.1.1.2"}])}catch{P.error("获取规章数据失败")}},k=c(!1),y=c("edit"),T=c(null),m=c({compliance:"",evidences:[],conclusion:"compliant",suggestion:""}),M=u=>({compliant:"success",partial:"warning","non-compliant":"danger"})[u]||"info",E=u=>({compliant:"符合",partial:"部分符合","non-compliant":"不符合"})[u]||u,$=u=>{y.value="edit",T.value=u,k.value=!0},R=u=>{y.value="view",T.value=u,k.value=!0},n=(u,t)=>{m.value.evidences.push({name:t.name,url:u.data}),P.success("上传成功")},o=u=>{const t=m.value.evidences.findIndex(S=>S.url===u.url);t>-1&&m.value.evidences.splice(t,1)},_=()=>{P.success("保存成功"),k.value=!1},A={children:"children",label:"label"},h=u=>{u.children||$({chapter:u.chapter,content:u.content,compliance:"compliant",complianceRef:""})};return(u,t)=>{const S=a("el-option"),F=a("el-select"),p=a("el-form-item"),z=a("el-form"),D=a("el-card"),N=a("el-input"),r=a("el-tree"),g=a("el-table-column"),j=a("el-tag"),i=a("el-button"),I=a("el-table"),J=a("el-empty"),Q=a("el-upload"),W=a("el-link"),L=a("el-radio"),X=a("el-radio-group"),Z=a("el-dialog");return C(),U("div",pe,[e(D,{class:"search-card"},{default:l(()=>[e(z,{inline:!0,model:v.value},{default:l(()=>[e(p,{label:"规章编号"},{default:l(()=>[e(F,{modelValue:v.value.regNumber,"onUpdate:modelValue":t[0]||(t[0]=d=>v.value.regNumber=d),placeholder:"请选择规章",clearable:"",onChange:B},{default:l(()=>[e(S,{label:"CCAR-121",value:"CCAR-121"}),e(S,{label:"CCAR-135",value:"CCAR-135"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1}),v.value.regNumber?(C(),U("div",re,[e(D,{class:"tree-card"},{header:l(()=>[b("div",ce,[t[7]||(t[7]=b("span",null,"规章目录",-1)),e(N,{modelValue:f.value,"onUpdate:modelValue":t[1]||(t[1]=d=>f.value=d),placeholder:"搜索条款",clearable:"",style:{width:"180px"}},null,8,["modelValue"])])]),default:l(()=>[e(r,{ref:"treeRef",data:V.value,props:A,"node-key":"id","highlight-current":"",onNodeClick:h},null,8,["data"])]),_:1}),b("div",me,[e(I,{data:x.value,border:"",style:{width:"100%"}},{default:l(()=>[e(g,{type:"index",label:"序号",width:"60",align:"center"}),e(g,{prop:"chapter",label:"章节",width:"100"}),e(g,{prop:"content",label:"要素","show-overflow-tooltip":""}),e(g,{prop:"compliance",label:"符合性",width:"200"},{default:l(({row:d})=>[b("div",_e,[e(j,{type:M(d.compliance)},{default:l(()=>[s(w(E(d.compliance)),1)]),_:2},1032,["type"]),b("span",fe,w(d.complianceRef),1)])]),_:1}),e(g,{label:"操作",width:"120",fixed:"right"},{default:l(({row:d})=>[e(i,{type:"primary",link:"",onClick:ee=>$(d)},{default:l(()=>t[8]||(t[8]=[s("编辑")])),_:2},1032,["onClick"]),e(i,{type:"primary",link:"",onClick:ee=>R(d)},{default:l(()=>t[9]||(t[9]=[s("查看")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])])])):(C(),Y(J,{key:1,description:"请先选择规章","image-size":200})),e(Z,{modelValue:k.value,"onUpdate:modelValue":t[6]||(t[6]=d=>k.value=d),title:y.value==="edit"?"编辑符合性声明":"查看符合性声明",width:"60%"},{footer:l(()=>[b("span",ge,[e(i,{onClick:t[5]||(t[5]=d=>k.value=!1)},{default:l(()=>t[14]||(t[14]=[s("取消")])),_:1}),y.value==="edit"?(C(),Y(i,{key:0,type:"primary",onClick:_},{default:l(()=>t[15]||(t[15]=[s(" 保存 ")])),_:1})):q("",!0)])]),default:l(()=>[e(z,{ref:"formRef",model:m.value,"label-width":"100px"},{default:l(()=>[e(p,{label:"条款编号"},{default:l(()=>{var d;return[b("span",null,w((d=T.value)==null?void 0:d.chapter),1)]}),_:1}),e(p,{label:"条款内容"},{default:l(()=>{var d;return[b("div",ve,w((d=T.value)==null?void 0:d.content),1)]}),_:1}),e(p,{label:"符合性说明"},{default:l(()=>[e(N,{modelValue:m.value.compliance,"onUpdate:modelValue":t[2]||(t[2]=d=>m.value.compliance=d),type:"textarea",rows:4,placeholder:"请输入符合性说明",disabled:y.value==="view"},null,8,["modelValue","disabled"])]),_:1}),e(p,{label:"证据材料"},{default:l(()=>[y.value==="edit"?(C(),Y(Q,{key:0,action:"/api/file/upload","file-list":m.value.evidences,"on-success":n,"on-remove":o,multiple:""},{default:l(()=>[e(i,{type:"primary"},{default:l(()=>t[10]||(t[10]=[s("上传文件")])),_:1})]),_:1},8,["file-list"])):(C(),U("div",be,[(C(!0),U(ae,null,ne(m.value.evidences,d=>(C(),U("div",{key:d.url,class:"evidence-item"},[e(W,{href:d.url,target:"_blank"},{default:l(()=>[s(w(d.name),1)]),_:2},1032,["href"])]))),128))]))]),_:1}),e(p,{label:"符合性结论"},{default:l(()=>[e(X,{modelValue:m.value.conclusion,"onUpdate:modelValue":t[3]||(t[3]=d=>m.value.conclusion=d),disabled:y.value==="view"},{default:l(()=>[e(L,{label:"compliant"},{default:l(()=>t[11]||(t[11]=[s("符合")])),_:1}),e(L,{label:"partial"},{default:l(()=>t[12]||(t[12]=[s("部分符合")])),_:1}),e(L,{label:"non-compliant"},{default:l(()=>t[13]||(t[13]=[s("不符合")])),_:1})]),_:1},8,["modelValue","disabled"])]),_:1}),m.value.conclusion!=="compliant"?(C(),Y(p,{key:0,label:"改进建议"},{default:l(()=>[e(N,{modelValue:m.value.suggestion,"onUpdate:modelValue":t[4]||(t[4]=d=>m.value.suggestion=d),type:"textarea",rows:3,placeholder:"请输入改进建议",disabled:y.value==="view"},null,8,["modelValue","disabled"])]),_:1})):q("",!0)]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}});const Ce=K(ye,[["__scopeId","data-v-199f9276"]]),ke={class:"sms-doc-container"},he={class:"file-manage"},Ve={class:"pagination"},we=H({__name:"SMSDoc",setup(O){const v=c("file"),f=c({type:"",department:"",date:[]}),V=c(1),x=c(10),B=c(100),k=c([{name:"2024年1月运行部安全月报",type:"monthly",department:"operation",uploadTime:"2024-02-01 10:00:00",uploader:"张三",url:"http://example.com/file1.pdf"},{name:"2024年第一季度安全工作会议纪要",type:"meeting",department:"safety",uploadTime:"2024-01-15 14:30:00",uploader:"李四",url:"http://example.com/file2.pdf"},{name:"2024年1月安全简报第1期",type:"bulletin",department:"safety",uploadTime:"2024-01-10 09:00:00",uploader:"王五",url:"http://example.com/file3.pdf"},{name:"维修部安全管理手册V2.0",type:"manual",department:"maintenance",uploadTime:"2024-01-05 16:00:00",uploader:"赵六",url:"http://example.com/file4.pdf"}]),y=n=>({monthly:"部门月报",meeting:"会议纪要",bulletin:"安全简报",manual:"管理手册"})[n]||n,T=n=>({operation:"运行部",maintenance:"维修部",safety:"安全监察部"})[n]||n,m=()=>{console.log("搜索条件:",f.value)},M=()=>{f.value={type:"",department:"",date:[]},m()},E=n=>{window.open(n.url)},$=n=>{window.open(n.url)},R=n=>{G.confirm("确认删除该文件？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{P.success("删除成功")})};return(n,o)=>{const _=a("el-option"),A=a("el-select"),h=a("el-form-item"),u=a("el-date-picker"),t=a("el-button"),S=a("el-form"),F=a("el-card"),p=a("el-table-column"),z=a("el-link"),D=a("el-tag"),N=a("el-table"),r=a("el-pagination"),g=a("el-tab-pane"),j=a("el-tabs");return C(),U("div",ke,[o[11]||(o[11]=b("div",{class:"page-header"},[b("h2",null,"SMS文件管理")],-1)),e(j,{modelValue:v.value,"onUpdate:modelValue":o[5]||(o[5]=i=>v.value=i),class:"main-tabs"},{default:l(()=>[e(g,{label:"文件管理",name:"file"},{default:l(()=>[b("div",he,[e(F,{class:"search-card"},{default:l(()=>[e(S,{inline:!0,model:f.value},{default:l(()=>[e(h,{label:"文件类型"},{default:l(()=>[e(A,{modelValue:f.value.type,"onUpdate:modelValue":o[0]||(o[0]=i=>f.value.type=i),placeholder:"请选择类型",clearable:"",style:{width:"160px"}},{default:l(()=>[e(_,{label:"部门月报",value:"monthly"}),e(_,{label:"安全会议纪要",value:"meeting"}),e(_,{label:"安全简报",value:"bulletin"}),e(_,{label:"管理手册",value:"manual"})]),_:1},8,["modelValue"])]),_:1}),e(h,{label:"部门"},{default:l(()=>[e(A,{modelValue:f.value.department,"onUpdate:modelValue":o[1]||(o[1]=i=>f.value.department=i),placeholder:"请选择部门",clearable:"",style:{width:"160px"}},{default:l(()=>[e(_,{label:"运行部",value:"operation"}),e(_,{label:"维修部",value:"maintenance"}),e(_,{label:"安全监察部",value:"safety"})]),_:1},8,["modelValue"])]),_:1}),e(h,{label:"日期"},{default:l(()=>[e(u,{modelValue:f.value.date,"onUpdate:modelValue":o[2]||(o[2]=i=>f.value.date=i),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",style:{width:"360px"}},null,8,["modelValue"])]),_:1}),e(h,null,{default:l(()=>[e(t,{type:"primary",onClick:m},{default:l(()=>o[6]||(o[6]=[s("查询")])),_:1}),e(t,{onClick:M},{default:l(()=>o[7]||(o[7]=[s("重置")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(N,{data:k.value,border:"",style:{width:"100%"}},{default:l(()=>[e(p,{type:"index",label:"序号",width:"60",align:"center"}),e(p,{prop:"name",label:"文件名称","min-width":"200"},{default:l(({row:i})=>[e(z,{type:"primary",onClick:I=>$(i)},{default:l(()=>[s(w(i.name),1)]),_:2},1032,["onClick"])]),_:1}),e(p,{prop:"type",label:"文件类型",width:"120"},{default:l(({row:i})=>[e(D,null,{default:l(()=>[s(w(y(i.type)),1)]),_:2},1024)]),_:1}),e(p,{prop:"department",label:"部门",width:"120"},{default:l(({row:i})=>[s(w(T(i.department)),1)]),_:1}),e(p,{prop:"uploadTime",label:"上传时间",width:"180"}),e(p,{prop:"uploader",label:"上传人",width:"120"}),e(p,{label:"操作",width:"180",fixed:"right"},{default:l(({row:i})=>[e(t,{type:"primary",link:"",onClick:I=>E(i)},{default:l(()=>o[8]||(o[8]=[s("下载")])),_:2},1032,["onClick"]),e(t,{type:"primary",link:"",onClick:I=>$(i)},{default:l(()=>o[9]||(o[9]=[s("查看")])),_:2},1032,["onClick"]),e(t,{type:"danger",link:"",onClick:I=>R(i)},{default:l(()=>o[10]||(o[10]=[s("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),b("div",Ve,[e(r,{"current-page":V.value,"onUpdate:currentPage":o[3]||(o[3]=i=>V.value=i),"page-size":x.value,"onUpdate:pageSize":o[4]||(o[4]=i=>x.value=i),total:B.value,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper"},null,8,["current-page","page-size","total"])])])]),_:1}),e(g,{label:"规章管理",name:"regulation"},{default:l(()=>[e(se)]),_:1}),e(g,{label:"符合性对标",name:"compliance"},{default:l(()=>[e(Ce)]),_:1})]),_:1},8,["modelValue"])])}}});const Te=K(we,[["__scopeId","data-v-53720553"]]);export{Te as default};
