import{d as Ue,r as c,L as A,q as tt,h as d,M as qe,i as _,c as R,b as v,e,f as t,v as ne,A as lt,m as i,F as K,j as pe,N as je,k as P,t as f,p as H,O as Be,P as at,x as ot,E as Pe,z as T,_ as xe}from"./index-97e706ba.js";const nt={class:"voluntary-report"},rt={class:"page-header"},st={class:"header-actions"},ut={class:"pagination-container"},it={class:"process-container"},dt={key:0,class:"process-form"},pt={key:1,class:"confirm-step"},mt={class:"confirm-content"},ct={class:"confirm-details"},ft={key:0},vt={key:1},_t={class:"upload-section"},gt={class:"process-history"},bt={class:"history-header"},yt={class:"record-content"},Vt={class:"record-info"},Nt={class:"record-comment"},Dt={key:0,class:"record-attachments"},Et={class:"dialog-footer"},Rt={key:0,class:"confirm-content"},kt={class:"confirm-details"},Tt={key:0},It={key:1},wt="/api/upload",ht=10*1024*1024,Ct=Ue({__name:"VoluntaryReport",setup(Ge){const m=c(null),L=c(),B=c();c(),c(),c(),c([]);const g=A({recordNumber:"",eventType:"",handleDept:"",status:""}),z=c([]),Q=c(!1),G=c(1),W=c(10),Z=c(0);c(!1),c("add"),c(),A({recordNumber:"",occurDate:"",flightNo:"",eventType:"",description:"",hopeHandleDept:"",improvementMeasures:""});const n={PENDING_REVIEW:"待审核",PENDING_PROCESS:"待处理",PENDING_DISTRIBUTE:"待分发",PENDING_AUDIT:"待评审",CLOSED:"已关闭",INVALID:"无效报告",REJECTED:"已退回"};c(!1),c(!1),c(!1);const J=c(!1),X=c(!1);A({result:"approve",comment:""}),A({department:"",requirement:"",deadline:""}),A({result:"approve",comment:""});const o=A({type:"",department:"",invalidReason:"",returnReason:"",auditComment:"",deadline:"",attachments:[]}),$=A({reason:"",comment:""}),oe={type:[{required:!0,message:"请选择处理类型",trigger:"change"}],department:[{required:!0,message:"请选择处理部门",trigger:"change",validator:(s,l)=>o.type==="distribute"&&!l?new Error("请选择处理部门"):!0}],invalidReason:[{required:!0,message:"请输入无效原因",trigger:"blur",validator:(s,l)=>o.type==="invalid"&&!l?new Error("请输入无效原因"):!0}],returnReason:[{required:!0,message:"请输入退回原因",trigger:"blur",validator:(s,l)=>o.type==="return"&&!l?new Error("请输入退回原因"):!0}],auditComment:[{required:!0,message:"请输入评审意见",trigger:"blur",validator:(s,l)=>o.type==="approve"&&!l?new Error("请输入评审意见"):!0}]},M={reason:[{required:!0,message:"请输入退回原因",trigger:"blur"}],comment:[{required:!0,message:"请输入退回意见",trigger:"blur"}]},me=s=>({[n.PENDING_REVIEW]:"info",[n.INVALID]:"danger",[n.PENDING_PROCESS]:"warning",[n.PENDING_AUDIT]:"primary",[n.CLOSED]:"",[n.REJECTED]:"danger"})[s]||"info",U=()=>{Q.value=!0,setTimeout(()=>{z.value=ee.filter(s=>{const l=!g.recordNumber||s.recordNumber.includes(g.recordNumber),O=!g.eventType||s.eventType===g.eventType,D=!g.handleDept||s.hopeHandleDept===g.handleDept||s.distributeDept===g.handleDept,S=!g.status||s.status===g.status;return l&&O&&D&&S}),Z.value=z.value.length,Q.value=!1},300)},re=()=>{g.recordNumber="",g.eventType="",g.handleDept="",g.status="",U()},ce=()=>{F.value=!0,p.occurDate="",p.occurTime="",p.flightNo="",p.aircraftNo="",p.eventType="",p.description="",p.hopeHandleDept="",p.improvementMeasures="",p.attachments=[],k.value=[]},fe=async s=>{try{await Pe.confirm("确认删除该报告？删除后无法恢复","提示",{type:"warning",confirmButtonText:"确定",cancelButtonText:"取消"});const l=ee.findIndex(O=>O.recordNumber===s.recordNumber);l>-1&&(ee.splice(l,1),T.success("删除成功"),U())}catch{}},ve=s=>{W.value=s,U()},_e=s=>{G.value=s,U()},ge=s=>{console.log("处理报告:",s),m.value=s,J.value=!0,b.value=!1,q.value=!1,Object.assign(o,{type:"",department:"",invalidReason:"",returnReason:"",auditComment:"",deadline:"",comment:"",attachments:[]})},be=async()=>{if(!(!L.value||!m.value)){await L.value.validate();try{const s={timestamp:new Date().toISOString(),type:o.type,operator:"当前用户",department:"安全监察部",action:N(o.type),comment:Ie(),attachments:o.attachments};switch(o.type){case"valid":m.value.status=n.PENDING_PROCESS,m.value.isEffective=!0;break;case"invalid":m.value.status=n.INVALID,m.value.isEffective=!1;break;case"distribute":m.value.status=n.PENDING_AUDIT,m.value.distributeDept=o.department;break;case"return":m.value.status=n.PENDING_REVIEW;break;case"approve":m.value.status=n.CLOSED,m.value.isEffective=!0;break;case"reject":m.value.status=n.PENDING_PROCESS;break}m.value.processRecords.unshift(s),T.success("处理成功"),J.value=!1,U()}catch(s){console.error(s),T.error("处理失败")}}},ye=async()=>{if(B.value){await B.value.validate();try{const s={timestamp:new Date().toISOString(),type:"reject",operator:"当前用户名",department:"当前部门",action:"退回",comment:$.comment};m.value.processRecords.unshift(s),m.value.status=n.REJECTED,T.success("退回成功"),X.value=!1,U()}catch(s){console.error(s),T.error("退回失败")}}},ee=[{recordNumber:"VR202403001",occurDate:"2024-03-18",occurTime:"09:30",flightNo:"DR1234",aircraftNo:"B-1234",eventType:"运行事件",description:"落地后发现跑道出口标识不清晰，建议加强维护",department:"飞行部",creator:"张三",createTime:"2024-03-18 10:00:00",status:n.PENDING_REVIEW,hopeHandleDept:"机场管理部",improvementMeasures:"建议与机场方沟通，及时修复和维护跑道标识",isDistributed:!1,isFeedback:!1,processRecords:[{timestamp:"2024-03-18 10:00:00",type:"review",operator:"张三",department:"飞行部",action:"提交报告",comment:"请审核"}]},{recordNumber:"VR202403002",occurDate:"2024-03-19",occurTime:"14:20",flightNo:"DR5678",aircraftNo:"B-5678",eventType:"机务事件",description:"例行检查时发现货舱门密封条有轻微磨损",department:"机务部",creator:"李四",createTime:"2024-03-19 15:00:00",status:n.PENDING_DISTRIBUTE,hopeHandleDept:"机务部",improvementMeasures:"建议更换新的密封条",isDistributed:!1,isFeedback:!1,processRecords:[{timestamp:"2024-03-19 15:30:00",type:"review",operator:"李四",department:"安全监察部",action:"审核通过",comment:"同意分发到机务部处理"}]},{recordNumber:"VR202403003",occurDate:"2024-03-20",occurTime:"11:15",flightNo:"DR9012",aircraftNo:"B-9012",eventType:"服务事件",description:"客舱设备使用说明标识不规范",department:"客舱部",creator:"王五",createTime:"2024-03-20 12:00:00",status:n.PENDING_PROCESS,hopeHandleDept:"客舱部",distributeDept:"客舱部",improvementMeasures:"更新客舱设备使用说明标识",isDistributed:!0,isFeedback:!1,processRecords:[{timestamp:"2024-03-20 12:00:00",type:"process",operator:"王五",department:"客舱部",action:"处理完成",comment:"已更新客舱设备使用说明标识"}]},{recordNumber:"VR202403004",occurDate:"2024-03-21",occurTime:"16:45",flightNo:"DR3456",aircraftNo:"B-3456",eventType:"空防事件",description:"安检通道X光机显示屏存在闪烁现象",department:"安保部",creator:"赵六",createTime:"2024-03-21 17:00:00",status:n.PENDING_CONFIRM,hopeHandleDept:"安保部",distributeDept:"安保部",improvementMeasures:"已联系厂家维修X光机显示屏",isDistributed:!0,isEffective:!0,analysis:"设备老化导致",controlMeasures:"定期检查维护",completionStatus:"已处理",isFeedback:!0,processRecords:[{timestamp:"2024-03-21 17:00:00",type:"process",operator:"赵六",department:"安保部",action:"处理完成",comment:"已联系厂家维修X光机显示屏"}]},{recordNumber:"VR202403005",occurDate:"2024-03-22",occurTime:"08:30",flightNo:"DR7890",aircraftNo:"B-7890",eventType:"运行事件",description:"机坪滑行引导线部分褪色",department:"飞行部",creator:"钱七",createTime:"2024-03-22 09:00:00",status:n.CLOSED,hopeHandleDept:"机场管理部",distributeDept:"机场管理部",improvementMeasures:"已与机场协调重新喷涂引导线",isDistributed:!0,isEffective:!0,analysis:"日晒雨淋导致标线褪色",controlMeasures:"定期检查维护",completionStatus:"已完成",isFeedback:!0,processRecords:[{timestamp:"2024-03-22 09:00:00",type:"process",operator:"钱七",department:"飞行部",action:"处理完成",comment:"已与机场协调重新喷涂引导线"}]}];U();const Ve=s=>({review:"primary",distribute:"warning",process:"primary",confirm:"success",reject:"danger"})[s],Ne=s=>`${{review:"审核",distribute:"分发",process:"处理",confirm:"确认",reject:"退回"}[s.type]}操作`,De=s=>s.split("/").pop()||s,Ee=s=>({[n.PENDING_REVIEW]:"报告审核",[n.PENDING_DISTRIBUTE]:"报告分发",[n.PENDING_PROCESS]:"报告处理",[n.PENDING_CONFIRM]:"报告确认"})[s||""]||"报告处理",I=s=>{switch(console.log("current status:",s),s){case n.PENDING_REVIEW:return[{label:"判定有效",value:"valid"},{label:"判定无效",value:"invalid"}];case n.PENDING_DISTRIBUTE:return[{label:"分发处理",value:"distribute"},{label:"退回修改",value:"return"}];case n.PENDING_AUDIT:return[{label:"评审通过",value:"approve"},{label:"评审不通过",value:"reject"}];default:return[]}},a=s=>({[n.PENDING_REVIEW]:"success",[n.PENDING_DISTRIBUTE]:"warning",[n.PENDING_PROCESS]:"primary",[n.PENDING_CONFIRM]:"success"})[s]||"primary",w=s=>({[n.PENDING_REVIEW]:"审核",[n.PENDING_DISTRIBUTE]:"分发",[n.PENDING_PROCESS]:"处理",[n.PENDING_AUDIT]:"评审"})[s]||"处理",x=s=>{m.value=s,o.type="",J.value=!0,b.value=!0},b=c(!1),N=s=>({approve:"审核通过",distribute:"分发处理",process:"处理完成",confirm:"确认完成",reject:"退回"})[s]||"处理",F=c(!1),Y=c(),Re=c(),k=c([]),p=A({occurDate:"",occurTime:"",flightNo:"",aircraftNo:"",eventType:"",description:"",hopeHandleDept:"",improvementMeasures:"",attachments:[]}),ke={occurDate:[{required:!0,message:"请选择事发日期",trigger:"change"}],eventType:[{required:!0,message:"请选择事件类型",trigger:"change"}],description:[{required:!0,message:"请输入事件描述",trigger:"blur"}],hopeHandleDept:[{required:!0,message:"请选择处理部门",trigger:"change"}]},Te=["image/jpeg","image/png","application/pdf"],C=s=>Te.includes(s.type)?s.size>ht?(T.error("文件大小不能超过10MB!"),!1):!0:(T.error("只能上传JPG/PNG/PDF格式文件!"),!1),se=(s,l)=>{p.attachments.push(s.url),T.success("上传成功")},ue=()=>{T.error("上传失败")},te=()=>{T.warning("最多只能上传5个文件")},ie=async()=>{if(Y.value){await Y.value.validate();try{const s={recordNumber:`VR${new Date().getTime()}`,occurDate:p.occurDate,occurTime:p.occurTime,flightNo:p.flightNo,aircraftNo:p.aircraftNo,eventType:p.eventType,description:p.description,department:"当前用户部门",creator:"当前用户",createTime:new Date().toISOString(),status:n.PENDING_REVIEW,hopeHandleDept:p.hopeHandleDept,improvementMeasures:p.improvementMeasures,isDistributed:!1,isFeedback:!1,processRecords:[{timestamp:new Date().toISOString(),type:"review",operator:"当前用户",department:"当前用户部门",action:"提交报告",comment:"请审核",attachments:p.attachments}]};ee.unshift(s),T.success("提交成功"),F.value=!1,U()}catch(s){console.error(s),T.error("提交失败")}}},Ie=()=>{switch(o.type){case"distribute":return`分发至${o.department}处理，期限：${o.deadline}`;case"invalid":return`判定无效，原因：${o.invalidReason}`;case"approve":return`评审通过：${o.auditComment}`;case"return":return`退回处理：${o.returnReason}`;default:return""}},q=c(!1),h=async()=>{if(L.value)try{await L.value.validate(),le.value?q.value=!0:T.warning("请填写完整信息")}catch{T.warning("请填写必填项")}},we=s=>[n.PENDING_PROCESS,n.PENDING_AUDIT,n.CLOSED].includes(s),he=async s=>{try{await Pe.confirm("撤回后将返回上一个处理状态，是否继续？","撤回确认",{type:"warning",confirmButtonText:"确认撤回",cancelButtonText:"取消"});const l=u(s.status),O={timestamp:new Date().toISOString(),type:"revoke",operator:"当前用户",department:"安全监察部",action:"撤回操作",comment:`从${s.status}撤回到${l}`};s.processRecords.unshift(O),s.status=l,T.success("撤回成功"),U()}catch{}},u=s=>({[n.PENDING_PROCESS]:n.PENDING_REVIEW,[n.PENDING_AUDIT]:n.PENDING_PROCESS,[n.CLOSED]:n.PENDING_AUDIT})[s]||s,le=tt(()=>{if(!o.type)return!1;switch(o.type){case"valid":return!!o.comment;case"invalid":return!!o.invalidReason;case"distribute":return!!o.department&&!!o.comment&&!!o.deadline;case"approve":return!!o.auditComment;case"reject":case"return":return!!o.returnReason;default:return!1}});return(s,l)=>{var Oe;const O=d("el-icon"),D=d("el-button"),S=d("el-input"),y=d("el-form-item"),V=d("el-option"),ae=d("el-select"),de=d("el-form"),ze=d("el-card"),j=d("el-table-column"),He=d("el-tag"),Le=d("el-table"),We=d("el-pagination"),Je=d("el-radio"),Xe=d("el-radio-group"),$e=d("el-date-picker"),Me=d("el-alert"),Fe=d("el-upload"),Ke=d("el-link"),Qe=d("el-timeline-item"),Ye=d("el-timeline"),Ce=d("el-dialog"),Ze=d("el-time-picker"),et=qe("loading");return _(),R("div",nt,[v("div",rt,[l[32]||(l[32]=v("h2",null,"自愿报告",-1)),v("div",st,[e(D,{type:"primary",onClick:ce},{default:t(()=>[e(O,null,{default:t(()=>[e(ne(lt))]),_:1}),l[31]||(l[31]=i("新增报告 "))]),_:1})])]),e(ze,{class:"search-card"},{default:t(()=>[e(de,{inline:!0,model:g},{default:t(()=>[e(y,{label:"信息编号"},{default:t(()=>[e(S,{modelValue:g.recordNumber,"onUpdate:modelValue":l[0]||(l[0]=r=>g.recordNumber=r),placeholder:"请输入编号",clearable:""},null,8,["modelValue"])]),_:1}),e(y,{label:"事件类型"},{default:t(()=>[e(ae,{modelValue:g.eventType,"onUpdate:modelValue":l[1]||(l[1]=r=>g.eventType=r),placeholder:"请选择类型",clearable:""},{default:t(()=>[e(V,{label:"运行事件",value:"运行事件"}),e(V,{label:"服务事件",value:"服务事件"}),e(V,{label:"机务事件",value:"机务事件"}),e(V,{label:"空防事件",value:"空防事件"})]),_:1},8,["modelValue"])]),_:1}),e(y,{label:"处理部门"},{default:t(()=>[e(ae,{modelValue:g.handleDept,"onUpdate:modelValue":l[2]||(l[2]=r=>g.handleDept=r),placeholder:"请选择部门",clearable:""},{default:t(()=>[e(V,{label:"飞行部",value:"飞行部"}),e(V,{label:"客舱部",value:"客舱部"}),e(V,{label:"机务部",value:"机务部"}),e(V,{label:"安保部",value:"安保部"})]),_:1},8,["modelValue"])]),_:1}),e(y,{label:"状态"},{default:t(()=>[e(ae,{modelValue:g.status,"onUpdate:modelValue":l[3]||(l[3]=r=>g.status=r),placeholder:"请选择状态",clearable:""},{default:t(()=>[(_(),R(K,null,pe(n,(r,E)=>e(V,{key:E,label:r,value:r},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(y,null,{default:t(()=>[e(D,{type:"primary",onClick:U},{default:t(()=>l[33]||(l[33]=[i("查询")])),_:1}),e(D,{onClick:re},{default:t(()=>l[34]||(l[34]=[i("重置")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),je((_(),P(Le,{data:z.value,border:"",style:{width:"100%"}},{default:t(()=>[e(j,{type:"selection",width:"55"}),e(j,{prop:"recordNumber",label:"信息编号",width:"120"}),e(j,{prop:"occurDate",label:"事发日期",width:"100"}),e(j,{prop:"flightNo",label:"航班号",width:"100"}),e(j,{prop:"eventType",label:"事件类型",width:"100"}),e(j,{prop:"description",label:"事件描述","show-overflow-tooltip":""}),e(j,{prop:"hopeHandleDept",label:"希望处理部门",width:"120"}),e(j,{prop:"distributeDept",label:"实际处理部门",width:"120"}),e(j,{prop:"status",label:"状态",width:"100"},{default:t(({row:r})=>[e(He,{type:me(r.status)},{default:t(()=>[i(f(r.status),1)]),_:2},1032,["type"])]),_:1}),e(j,{label:"操作",width:"200",fixed:"right"},{default:t(({row:r})=>[e(D,{link:"",type:"primary",onClick:E=>x(r)},{default:t(()=>l[35]||(l[35]=[i("查看")])),_:2},1032,["onClick"]),r.status!==n.CLOSED?(_(),P(D,{key:0,link:"",type:a(r.status),onClick:E=>ge(r)},{default:t(()=>[i(f(w(r.status)),1)]),_:2},1032,["type","onClick"])):H("",!0),r.status===n.CLOSED?(_(),P(D,{key:1,link:"",type:"danger",onClick:E=>fe(r)},{default:t(()=>l[36]||(l[36]=[i("删除")])),_:2},1032,["onClick"])):H("",!0),we(r.status)?(_(),P(D,{key:2,link:"",type:"warning",onClick:E=>he(r)},{default:t(()=>l[37]||(l[37]=[i(" 撤回 ")])),_:2},1032,["onClick"])):H("",!0)]),_:1})]),_:1},8,["data"])),[[et,Q.value]]),v("div",ut,[e(We,{"current-page":G.value,"onUpdate:currentPage":l[4]||(l[4]=r=>G.value=r),"page-size":W.value,"onUpdate:pageSize":l[5]||(l[5]=r=>W.value=r),"page-sizes":[10,20,50,100],total:Z.value,layout:"total, sizes, prev, pager, next",onSizeChange:ve,onCurrentChange:_e},null,8,["current-page","page-size","total"])]),e(Ce,{modelValue:J.value,"onUpdate:modelValue":l[16]||(l[16]=r=>J.value=r),title:Ee((Oe=m.value)==null?void 0:Oe.status),width:"900px"},{footer:t(()=>[v("div",Et,[e(D,{onClick:l[14]||(l[14]=r=>J.value=!1)},{default:t(()=>l[41]||(l[41]=[i("取消")])),_:1}),q.value?(_(),R(K,{key:1},[e(D,{onClick:l[15]||(l[15]=r=>q.value=!1)},{default:t(()=>l[43]||(l[43]=[i("上一步")])),_:1}),e(D,{type:"primary",onClick:be},{default:t(()=>[i(" 确认"+f(w(o.type)),1)]),_:1})],64)):(_(),P(D,{key:0,type:"primary",onClick:h,disabled:!o.type||!le.value},{default:t(()=>l[42]||(l[42]=[i(" 下一步 ")])),_:1},8,["disabled"]))])]),default:t(()=>[v("div",it,[q.value?(_(),R("div",pt,[v("div",mt,[e(Me,{title:`您确定要${w(o.type)}吗？`,type:"warning","show-icon":""},{default:t(()=>[v("div",ct,[o.type==="valid"?(_(),R("p",ft,"处理意见: "+f(o.comment),1)):o.type==="invalid"?(_(),R("p",vt,"无效原因: "+f(o.invalidReason),1)):o.type==="distribute"?(_(),R(K,{key:2},[v("p",null,"处理部门: "+f(o.department),1),v("p",null,"处理要求: "+f(o.comment),1),v("p",null,"处理期限: "+f(o.deadline),1)],64)):H("",!0)])]),_:1},8,["title"])]),v("div",_t,[l[39]||(l[39]=v("h4",null,"上传附件",-1)),e(Fe,{action:"/api/upload","on-success":se,"on-error":ue,multiple:""},{default:t(()=>[e(D,{type:"primary"},{default:t(()=>[e(O,null,{default:t(()=>[e(ne(Be))]),_:1}),l[38]||(l[38]=i("选择文件 "))]),_:1})]),_:1})])])):(_(),R("div",dt,[e(de,{ref_key:"processFormRef",ref:L,model:o,rules:oe,"label-width":"100px"},{default:t(()=>[e(y,{label:"处理类型",prop:"type"},{default:t(()=>[e(Xe,{modelValue:o.type,"onUpdate:modelValue":l[6]||(l[6]=r=>o.type=r)},{default:t(()=>{var r;return[(_(!0),R(K,null,pe(I((r=m.value)==null?void 0:r.status),E=>(_(),P(Je,{key:E.value,label:E.value},{default:t(()=>[i(f(E.label),1)]),_:2},1032,["label"]))),128))]}),_:1},8,["modelValue"])]),_:1}),o.type==="valid"?(_(),P(y,{key:0,label:"处理意见",prop:"comment"},{default:t(()=>[e(S,{modelValue:o.comment,"onUpdate:modelValue":l[7]||(l[7]=r=>o.comment=r),type:"textarea",rows:"3",placeholder:"请输入处理意见"},null,8,["modelValue"])]),_:1})):o.type==="invalid"?(_(),P(y,{key:1,label:"无效原因",prop:"invalidReason"},{default:t(()=>[e(S,{modelValue:o.invalidReason,"onUpdate:modelValue":l[8]||(l[8]=r=>o.invalidReason=r),type:"textarea",rows:"3",placeholder:"请说明判定无效的原因"},null,8,["modelValue"])]),_:1})):o.type==="distribute"?(_(),R(K,{key:2},[e(y,{label:"处理部门",prop:"department"},{default:t(()=>[e(ae,{modelValue:o.department,"onUpdate:modelValue":l[9]||(l[9]=r=>o.department=r),placeholder:"请选择处理部门"},{default:t(()=>[e(V,{label:"飞行部",value:"飞行部"}),e(V,{label:"客舱部",value:"客舱部"}),e(V,{label:"机务部",value:"机务部"}),e(V,{label:"安保部",value:"安保部"}),e(V,{label:"机场管理部",value:"机场管理部"})]),_:1},8,["modelValue"])]),_:1}),e(y,{label:"处理要求",prop:"comment"},{default:t(()=>[e(S,{modelValue:o.comment,"onUpdate:modelValue":l[10]||(l[10]=r=>o.comment=r),type:"textarea",rows:"3",placeholder:"请输入处理要求"},null,8,["modelValue"])]),_:1}),e(y,{label:"处理期限",prop:"deadline"},{default:t(()=>[e($e,{modelValue:o.deadline,"onUpdate:modelValue":l[11]||(l[11]=r=>o.deadline=r),type:"datetime",placeholder:"请选择处理期限"},null,8,["modelValue"])]),_:1})],64)):o.type==="approve"?(_(),P(y,{key:3,label:"评审意见",prop:"auditComment"},{default:t(()=>[e(S,{modelValue:o.auditComment,"onUpdate:modelValue":l[12]||(l[12]=r=>o.auditComment=r),type:"textarea",rows:"3",placeholder:"请输入评审意见"},null,8,["modelValue"])]),_:1})):o.type==="reject"||o.type==="return"?(_(),P(y,{key:4,label:"退回原因",prop:"returnReason"},{default:t(()=>[e(S,{modelValue:o.returnReason,"onUpdate:modelValue":l[13]||(l[13]=r=>o.returnReason=r),type:"textarea",rows:"3",placeholder:"请说明退回原因"},null,8,["modelValue"])]),_:1})):H("",!0)]),_:1},8,["model"])])),v("div",gt,[v("div",bt,[e(O,null,{default:t(()=>[e(ne(at))]),_:1}),l[40]||(l[40]=v("span",null,"流转记录",-1))]),e(Ye,null,{default:t(()=>{var r;return[(_(!0),R(K,null,pe((r=m.value)==null?void 0:r.processRecords,E=>(_(),P(Qe,{key:E.timestamp,timestamp:E.timestamp,type:Ve(E.type)},{default:t(()=>{var Ae;return[v("div",yt,[v("h4",null,f(Ne(E)),1),v("p",Vt,[v("span",null,"操作人: "+f(E.operator),1),v("span",null,"部门: "+f(E.department),1)]),v("p",Nt,f(E.comment),1),(Ae=E.attachments)!=null&&Ae.length?(_(),R("div",Dt,[(_(!0),R(K,null,pe(E.attachments,Se=>(_(),P(Ke,{key:Se,type:"primary",underline:!1,onClick:Bt=>s.handleDownload(Se)},{default:t(()=>[e(O,null,{default:t(()=>[e(ne(ot))]),_:1}),i(" "+f(De(Se)),1)]),_:2},1032,["onClick"]))),128))])):H("",!0)])]}),_:2},1032,["timestamp","type"]))),128))]}),_:1})])])]),_:1},8,["modelValue","title"]),e(Ce,{modelValue:X.value,"onUpdate:modelValue":l[20]||(l[20]=r=>X.value=r),title:"退回报告",width:"600px"},{footer:t(()=>[e(D,{onClick:l[19]||(l[19]=r=>X.value=!1)},{default:t(()=>l[44]||(l[44]=[i("取消")])),_:1}),e(D,{type:"primary",onClick:ye},{default:t(()=>l[45]||(l[45]=[i("确定")])),_:1})]),default:t(()=>[e(de,{ref_key:"rejectFormRef",ref:B,model:$,rules:M,"label-width":"100px"},{default:t(()=>[e(y,{label:"退回原因",prop:"reason"},{default:t(()=>[e(S,{modelValue:$.reason,"onUpdate:modelValue":l[17]||(l[17]=r=>$.reason=r),type:"textarea",rows:"3",placeholder:"请输入退回原因"},null,8,["modelValue"])]),_:1}),e(y,{label:"退回意见",prop:"comment"},{default:t(()=>[e(S,{modelValue:$.comment,"onUpdate:modelValue":l[18]||(l[18]=r=>$.comment=r),type:"textarea",rows:"3",placeholder:"请输入退回意见"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),e(Ce,{modelValue:F.value,"onUpdate:modelValue":l[30]||(l[30]=r=>F.value=r),title:"新增自愿报告",width:"600px"},{footer:t(()=>[e(D,{onClick:l[29]||(l[29]=r=>F.value=!1)},{default:t(()=>l[48]||(l[48]=[i("取消")])),_:1}),e(D,{type:"primary",onClick:ie},{default:t(()=>l[49]||(l[49]=[i("确定")])),_:1})]),default:t(()=>[e(de,{ref_key:"addFormRef",ref:Y,model:p,rules:ke,"label-width":"100px"},{default:t(()=>[e(y,{label:"事发日期",prop:"occurDate"},{default:t(()=>[e($e,{modelValue:p.occurDate,"onUpdate:modelValue":l[21]||(l[21]=r=>p.occurDate=r),type:"date",placeholder:"请选择日期"},null,8,["modelValue"])]),_:1}),e(y,{label:"事发时间",prop:"occurTime"},{default:t(()=>[e(Ze,{modelValue:p.occurTime,"onUpdate:modelValue":l[22]||(l[22]=r=>p.occurTime=r),placeholder:"请选择时间"},null,8,["modelValue"])]),_:1}),e(y,{label:"航班号",prop:"flightNo"},{default:t(()=>[e(S,{modelValue:p.flightNo,"onUpdate:modelValue":l[23]||(l[23]=r=>p.flightNo=r),placeholder:"请输入航班号"},null,8,["modelValue"])]),_:1}),e(y,{label:"机号",prop:"aircraftNo"},{default:t(()=>[e(S,{modelValue:p.aircraftNo,"onUpdate:modelValue":l[24]||(l[24]=r=>p.aircraftNo=r),placeholder:"请输入机号"},null,8,["modelValue"])]),_:1}),e(y,{label:"事件类型",prop:"eventType"},{default:t(()=>[e(ae,{modelValue:p.eventType,"onUpdate:modelValue":l[25]||(l[25]=r=>p.eventType=r),placeholder:"请选择事件类型"},{default:t(()=>[e(V,{label:"运行事件",value:"运行事件"}),e(V,{label:"服务事件",value:"服务事件"}),e(V,{label:"机务事件",value:"机务事件"}),e(V,{label:"空防事件",value:"空防事件"})]),_:1},8,["modelValue"])]),_:1}),e(y,{label:"事件描述",prop:"description"},{default:t(()=>[e(S,{modelValue:p.description,"onUpdate:modelValue":l[26]||(l[26]=r=>p.description=r),type:"textarea",rows:"3",placeholder:"请输入事件描述"},null,8,["modelValue"])]),_:1}),e(y,{label:"希望处理部门",prop:"hopeHandleDept"},{default:t(()=>[e(ae,{modelValue:p.hopeHandleDept,"onUpdate:modelValue":l[27]||(l[27]=r=>p.hopeHandleDept=r),placeholder:"请选择处理部门"},{default:t(()=>[e(V,{label:"飞行部",value:"飞行部"}),e(V,{label:"客舱部",value:"客舱部"}),e(V,{label:"机务部",value:"机务部"}),e(V,{label:"安保部",value:"安保部"}),e(V,{label:"机场管理部",value:"机场管理部"})]),_:1},8,["modelValue"])]),_:1}),e(y,{label:"改进建议",prop:"improvementMeasures"},{default:t(()=>[e(S,{modelValue:p.improvementMeasures,"onUpdate:modelValue":l[28]||(l[28]=r=>p.improvementMeasures=r),type:"textarea",rows:"3",placeholder:"请输入改进建议"},null,8,["modelValue"])]),_:1}),e(y,{label:"附件"},{default:t(()=>[e(Fe,{ref_key:"uploadRef",ref:Re,action:wt,"before-upload":C,"on-success":se,"on-error":ue,"on-exceed":te,"file-list":k.value,multiple:"",limit:5},{tip:t(()=>l[47]||(l[47]=[v("div",{class:"el-upload__tip"}," 支持jpg、png、pdf格式文件，单个文件不超过10MB，最多上传5个文件 ",-1)])),default:t(()=>[e(D,{type:"primary"},{default:t(()=>[e(O,null,{default:t(()=>[e(ne(Be))]),_:1}),l[46]||(l[46]=i("上传附件 "))]),_:1})]),_:1},8,["file-list"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),q.value?(_(),R("div",Rt,[e(Me,{title:`您确定要${w(o.type)}吗？`,type:"warning","show-icon":""},{default:t(()=>[v("div",kt,[o.type==="valid"?(_(),R("p",Tt,"处理意见: "+f(o.comment),1)):o.type==="invalid"?(_(),R("p",It,"无效原因: "+f(o.invalidReason),1)):o.type==="distribute"?(_(),R(K,{key:2},[v("p",null,"处理部门: "+f(o.department),1),v("p",null,"处理要求: "+f(o.comment),1),v("p",null,"处理期限: "+f(o.deadline),1)],64)):H("",!0)])]),_:1},8,["title"])])):H("",!0)])}}});const St=xe(Ct,[["__scopeId","data-v-cc506ac0"]]),Pt={class:"mandatory-report"},Ut={class:"page-header"},xt={class:"pagination-container"},Gt={class:"dialog-footer"},$t={class:"dialog-footer"},Mt=Ue({__name:"MandatoryReport",setup(Ge){const m=A({recordNumber:"",flightNo:"",eventType:"",is396Event:"",needInvestigation:""}),L=c([{recordNumber:"MR202403001",occurDate:"2024-03-15",occurTime:"09:45",flightNo:"DR6558",aircraftNo:"B-1234",flightSegment:"曼德勒-芒市",occurPhase:"takeoff",controlArea:"曼德勒机场",eventType:"operation",description:"起飞滑跑阶段，发动机参数异常，机组执行中断起飞程序，安全返回机坪。",impact:"航班延误2小时，对后续航班运行造成影响。",is396Event:!0,needInvestigation:!0},{recordNumber:"MR202403002",occurDate:"2024-03-14",occurTime:"15:20",flightNo:"DR6569",aircraftNo:"B-5678",flightSegment:"芒市-昆明",occurPhase:"cruise",controlArea:"昆明管制区",eventType:"maintenance",description:"巡航阶段，客舱高度警告，机组按程序处置后正常落地。",impact:"无重大影响，正常落地。",is396Event:!1,needInvestigation:!0},{recordNumber:"MR202403003",occurDate:"2024-03-13",occurTime:"11:30",flightNo:"DR6560",aircraftNo:"B-9012",flightSegment:"昆明-腾冲",occurPhase:"before_takeoff",controlArea:"昆明机场",eventType:"security",description:"旅客登机过程中发现未经安检物品，立即启动安保程序处置。",impact:"航班延误45分钟。",is396Event:!1,needInvestigation:!1},{recordNumber:"MR202403004",occurDate:"2024-03-12",occurTime:"16:15",flightNo:"DR6571",aircraftNo:"B-3456",flightSegment:"腾冲-丽江",occurPhase:"landing",controlArea:"丽江机场",eventType:"operation",description:"着陆过程中遭遇风切变，机组执行复飞程序后安全落地。",impact:"航班备降昆明，延误3小时。",is396Event:!0,needInvestigation:!0}]),B=c(!1),g=c(1),z=c(10),Q=c(4),G=c(!1),W=c("add"),Z=c(),n=A({flightNo:"",aircraftNo:"",occurDate:"",occurTime:"",flightSegment:"",occurPhase:"",controlArea:"",eventType:"",is396Event:!1,needInvestigation:!1,description:"",impact:""}),J={flightNo:[{required:!0,message:"请输入航班号",trigger:"blur"}],aircraftNo:[{required:!0,message:"请输入飞机号",trigger:"blur"}],occurDate:[{required:!0,message:"请选择事发日期",trigger:"change"}],occurTime:[{required:!0,message:"请选择事发时间",trigger:"change"}],eventType:[{required:!0,message:"请选择事件类型",trigger:"change"}],description:[{required:!0,message:"请输入事件经过",trigger:"blur"}]},X=c(!1),o=c({}),$=c(!1),oe=c(),M=A({conclusion:"",suggestion:"",prevention:""}),me={conclusion:[{required:!0,message:"请输入调查结论",trigger:"blur"}],suggestion:[{required:!0,message:"请输入处理建议",trigger:"blur"}],prevention:[{required:!0,message:"请输入预防措施",trigger:"blur"}]},U={before_takeoff:"起飞前",takeoff:"起飞",climb:"爬升",cruise:"巡航",descent:"下降",landing:"着陆",after_landing:"着陆后"},re={maintenance:"机务事件",operation:"运行事件",security:"空防事件",service:"服务事件"},ce=()=>{},fe=()=>{m.recordNumber="",m.flightNo="",m.eventType="",m.is396Event="",m.needInvestigation=""},ve=()=>{W.value="add",Ee(),G.value=!0},_e=I=>{W.value="edit",Object.assign(n,I),G.value=!0},ge=I=>{o.value=I,X.value=!0},be=I=>{M.conclusion="",M.suggestion="",M.prevention="",$.value=!0},ye=async()=>{Z.value&&await Z.value.validate(I=>{I&&(T.success(W.value==="add"?"新增成功":"修改成功"),G.value=!1)})},ee=async()=>{oe.value&&await oe.value.validate(I=>{I&&(T.success("调查报告提交成功"),$.value=!1)})},Ve=async I=>{try{await Pe.confirm("确认删除该报告？","提示",{type:"warning"}),T.success("删除成功")}catch{}},Ne=I=>{z.value=I},De=I=>{g.value=I},Ee=()=>{n.flightNo="",n.aircraftNo="",n.occurDate="",n.occurTime="",n.flightSegment="",n.occurPhase="",n.controlArea="",n.eventType="",n.is396Event=!1,n.needInvestigation=!1,n.description="",n.impact=""};return(I,a)=>{const w=d("el-button"),x=d("el-input"),b=d("el-form-item"),N=d("el-option"),F=d("el-select"),Y=d("el-form"),Re=d("el-card"),k=d("el-table-column"),p=d("el-tag"),ke=d("el-table"),Te=d("el-pagination"),C=d("el-col"),se=d("el-date-picker"),ue=d("el-time-picker"),te=d("el-radio"),ie=d("el-radio-group"),Ie=d("el-row"),q=d("el-dialog"),h=d("el-descriptions-item"),we=d("el-descriptions"),he=qe("loading");return _(),R("div",Pt,[v("div",Ut,[a[28]||(a[28]=v("h2",null,"强制报告",-1)),e(w,{type:"primary",onClick:ve},{default:t(()=>a[27]||(a[27]=[i("+ 新增报告")])),_:1})]),e(Re,{class:"search-card"},{default:t(()=>[e(Y,{inline:!0,model:m},{default:t(()=>[e(b,{label:"编号"},{default:t(()=>[e(x,{modelValue:m.recordNumber,"onUpdate:modelValue":a[0]||(a[0]=u=>m.recordNumber=u),placeholder:"请输入编号",clearable:""},null,8,["modelValue"])]),_:1}),e(b,{label:"航班号"},{default:t(()=>[e(x,{modelValue:m.flightNo,"onUpdate:modelValue":a[1]||(a[1]=u=>m.flightNo=u),placeholder:"请输入航班号",clearable:""},null,8,["modelValue"])]),_:1}),e(b,{label:"事件类型"},{default:t(()=>[e(F,{modelValue:m.eventType,"onUpdate:modelValue":a[2]||(a[2]=u=>m.eventType=u),placeholder:"请选择",clearable:""},{default:t(()=>[e(N,{label:"机务事件",value:"maintenance"}),e(N,{label:"运行事件",value:"operation"}),e(N,{label:"空防事件",value:"security"}),e(N,{label:"服务事件",value:"service"})]),_:1},8,["modelValue"])]),_:1}),e(b,{label:"396事件"},{default:t(()=>[e(F,{modelValue:m.is396Event,"onUpdate:modelValue":a[3]||(a[3]=u=>m.is396Event=u),placeholder:"请选择",clearable:""},{default:t(()=>[e(N,{label:"是",value:!0}),e(N,{label:"否",value:!1})]),_:1},8,["modelValue"])]),_:1}),e(b,{label:"调查状态"},{default:t(()=>[e(F,{modelValue:m.needInvestigation,"onUpdate:modelValue":a[4]||(a[4]=u=>m.needInvestigation=u),placeholder:"请选择",clearable:""},{default:t(()=>[e(N,{label:"需要调查",value:!0}),e(N,{label:"无需调查",value:!1})]),_:1},8,["modelValue"])]),_:1}),e(b,null,{default:t(()=>[e(w,{type:"primary",onClick:ce},{default:t(()=>a[29]||(a[29]=[i("查询")])),_:1}),e(w,{onClick:fe},{default:t(()=>a[30]||(a[30]=[i("重置")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),je((_(),P(ke,{data:L.value,style:{width:"100%"}},{default:t(()=>[e(k,{type:"index",label:"序号",width:"60"}),e(k,{prop:"recordNumber",label:"编号",width:"120"}),e(k,{prop:"occurDate",label:"事发日期",width:"100"}),e(k,{prop:"occurTime",label:"时间",width:"100"}),e(k,{prop:"flightNo",label:"航班号",width:"100"}),e(k,{prop:"aircraftNo",label:"飞机号",width:"100"}),e(k,{prop:"flightSegment",label:"航段",width:"120"}),e(k,{prop:"occurPhase",label:"事发阶段",width:"120"},{default:t(({row:u})=>[i(f(U[u.occurPhase]),1)]),_:1}),e(k,{prop:"controlArea",label:"所在管制区",width:"120"}),e(k,{prop:"eventType",label:"事件类型",width:"120"},{default:t(({row:u})=>[i(f(re[u.eventType]),1)]),_:1}),e(k,{prop:"description",label:"事件经过","min-width":"200","show-overflow-tooltip":""}),e(k,{prop:"impact",label:"产生影响","min-width":"150","show-overflow-tooltip":""}),e(k,{prop:"is396Event",label:"396事件",width:"90"},{default:t(({row:u})=>[e(p,{type:u.is396Event?"danger":"info"},{default:t(()=>[i(f(u.is396Event?"是":"否"),1)]),_:2},1032,["type"])]),_:1}),e(k,{prop:"needInvestigation",label:"调查状态",width:"90"},{default:t(({row:u})=>[e(p,{type:u.needInvestigation?"warning":""},{default:t(()=>[i(f(u.needInvestigation?"需要调查":"无需调查"),1)]),_:2},1032,["type"])]),_:1}),e(k,{label:"操作",width:"200",fixed:"right"},{default:t(({row:u})=>[e(w,{link:"",type:"primary",onClick:le=>_e(u)},{default:t(()=>a[31]||(a[31]=[i("编辑")])),_:2},1032,["onClick"]),e(w,{link:"",type:"primary",onClick:le=>ge(u)},{default:t(()=>a[32]||(a[32]=[i("查看")])),_:2},1032,["onClick"]),u.needInvestigation?(_(),P(w,{key:0,link:"",type:"warning",onClick:le=>be(u)},{default:t(()=>a[33]||(a[33]=[i("调查")])),_:2},1032,["onClick"])):H("",!0),e(w,{link:"",type:"danger",onClick:le=>Ve(u)},{default:t(()=>a[34]||(a[34]=[i("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[he,B.value]]),v("div",xt,[e(Te,{"current-page":g.value,"onUpdate:currentPage":a[5]||(a[5]=u=>g.value=u),"page-size":z.value,"onUpdate:pageSize":a[6]||(a[6]=u=>z.value=u),"page-sizes":[10,20,50,100],total:Q.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:Ne,onCurrentChange:De},null,8,["current-page","page-size","total"])]),e(q,{modelValue:G.value,"onUpdate:modelValue":a[20]||(a[20]=u=>G.value=u),title:W.value==="add"?"新增强制报告":"编辑强制报告",width:"60%","close-on-click-modal":!1},{footer:t(()=>[v("span",Gt,[e(w,{onClick:a[19]||(a[19]=u=>G.value=!1)},{default:t(()=>a[39]||(a[39]=[i("取消")])),_:1}),e(w,{type:"primary",onClick:ye},{default:t(()=>a[40]||(a[40]=[i("确定")])),_:1})])]),default:t(()=>[e(Y,{ref_key:"formRef",ref:Z,model:n,rules:J,"label-width":"100px",class:"report-form"},{default:t(()=>[e(Ie,{gutter:20},{default:t(()=>[e(C,{span:12},{default:t(()=>[e(b,{label:"航班号",prop:"flightNo"},{default:t(()=>[e(x,{modelValue:n.flightNo,"onUpdate:modelValue":a[7]||(a[7]=u=>n.flightNo=u),placeholder:"请输入航班号"},null,8,["modelValue"])]),_:1})]),_:1}),e(C,{span:12},{default:t(()=>[e(b,{label:"飞机号",prop:"aircraftNo"},{default:t(()=>[e(x,{modelValue:n.aircraftNo,"onUpdate:modelValue":a[8]||(a[8]=u=>n.aircraftNo=u),placeholder:"请输入飞机号"},null,8,["modelValue"])]),_:1})]),_:1}),e(C,{span:12},{default:t(()=>[e(b,{label:"事发日期",prop:"occurDate"},{default:t(()=>[e(se,{modelValue:n.occurDate,"onUpdate:modelValue":a[9]||(a[9]=u=>n.occurDate=u),type:"date",placeholder:"选择日期",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),e(C,{span:12},{default:t(()=>[e(b,{label:"事发时间",prop:"occurTime"},{default:t(()=>[e(ue,{modelValue:n.occurTime,"onUpdate:modelValue":a[10]||(a[10]=u=>n.occurTime=u),placeholder:"选择时间",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),e(C,{span:12},{default:t(()=>[e(b,{label:"航段",prop:"flightSegment"},{default:t(()=>[e(x,{modelValue:n.flightSegment,"onUpdate:modelValue":a[11]||(a[11]=u=>n.flightSegment=u),placeholder:"请输入航段"},null,8,["modelValue"])]),_:1})]),_:1}),e(C,{span:12},{default:t(()=>[e(b,{label:"事发阶段",prop:"occurPhase"},{default:t(()=>[e(F,{modelValue:n.occurPhase,"onUpdate:modelValue":a[12]||(a[12]=u=>n.occurPhase=u),placeholder:"请选择",style:{width:"100%"}},{default:t(()=>[e(N,{label:"起飞前",value:"before_takeoff"}),e(N,{label:"起飞",value:"takeoff"}),e(N,{label:"爬升",value:"climb"}),e(N,{label:"巡航",value:"cruise"}),e(N,{label:"下降",value:"descent"}),e(N,{label:"着陆",value:"landing"}),e(N,{label:"着陆后",value:"after_landing"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(C,{span:12},{default:t(()=>[e(b,{label:"所在管制区",prop:"controlArea"},{default:t(()=>[e(x,{modelValue:n.controlArea,"onUpdate:modelValue":a[13]||(a[13]=u=>n.controlArea=u),placeholder:"请输入管制区"},null,8,["modelValue"])]),_:1})]),_:1}),e(C,{span:12},{default:t(()=>[e(b,{label:"事件类型",prop:"eventType"},{default:t(()=>[e(F,{modelValue:n.eventType,"onUpdate:modelValue":a[14]||(a[14]=u=>n.eventType=u),placeholder:"请选择",style:{width:"100%"}},{default:t(()=>[e(N,{label:"机务事件",value:"maintenance"}),e(N,{label:"运行事件",value:"operation"}),e(N,{label:"空防事件",value:"security"}),e(N,{label:"服务事件",value:"service"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(C,{span:12},{default:t(()=>[e(b,{label:"396事件",prop:"is396Event"},{default:t(()=>[e(ie,{modelValue:n.is396Event,"onUpdate:modelValue":a[15]||(a[15]=u=>n.is396Event=u)},{default:t(()=>[e(te,{label:!0},{default:t(()=>a[35]||(a[35]=[i("是")])),_:1}),e(te,{label:!1},{default:t(()=>a[36]||(a[36]=[i("否")])),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(C,{span:12},{default:t(()=>[e(b,{label:"调查状态",prop:"needInvestigation"},{default:t(()=>[e(ie,{modelValue:n.needInvestigation,"onUpdate:modelValue":a[16]||(a[16]=u=>n.needInvestigation=u)},{default:t(()=>[e(te,{label:!0},{default:t(()=>a[37]||(a[37]=[i("需要调查")])),_:1}),e(te,{label:!1},{default:t(()=>a[38]||(a[38]=[i("无需调查")])),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(C,{span:24},{default:t(()=>[e(b,{label:"事件经过",prop:"description"},{default:t(()=>[e(x,{modelValue:n.description,"onUpdate:modelValue":a[17]||(a[17]=u=>n.description=u),type:"textarea",rows:4,placeholder:"请详细描述事件经过"},null,8,["modelValue"])]),_:1})]),_:1}),e(C,{span:24},{default:t(()=>[e(b,{label:"产生影响",prop:"impact"},{default:t(()=>[e(x,{modelValue:n.impact,"onUpdate:modelValue":a[18]||(a[18]=u=>n.impact=u),type:"textarea",rows:4,placeholder:"请描述事件产生的影响"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),e(q,{modelValue:X.value,"onUpdate:modelValue":a[21]||(a[21]=u=>X.value=u),title:"报告详情",width:"60%"},{default:t(()=>[e(we,{column:2,border:""},{default:t(()=>[e(h,{label:"编号"},{default:t(()=>[i(f(o.value.recordNumber),1)]),_:1}),e(h,{label:"航班号"},{default:t(()=>[i(f(o.value.flightNo),1)]),_:1}),e(h,{label:"飞机号"},{default:t(()=>[i(f(o.value.aircraftNo),1)]),_:1}),e(h,{label:"事发日期"},{default:t(()=>[i(f(o.value.occurDate),1)]),_:1}),e(h,{label:"事发时间"},{default:t(()=>[i(f(o.value.occurTime),1)]),_:1}),e(h,{label:"航段"},{default:t(()=>[i(f(o.value.flightSegment),1)]),_:1}),e(h,{label:"事发阶段"},{default:t(()=>[i(f(U[o.value.occurPhase]),1)]),_:1}),e(h,{label:"所在管制区"},{default:t(()=>[i(f(o.value.controlArea),1)]),_:1}),e(h,{label:"事件类型"},{default:t(()=>[i(f(re[o.value.eventType]),1)]),_:1}),e(h,{label:"396事件"},{default:t(()=>[e(p,{type:o.value.is396Event?"danger":"info"},{default:t(()=>[i(f(o.value.is396Event?"是":"否"),1)]),_:1},8,["type"])]),_:1}),e(h,{label:"调查状态"},{default:t(()=>[e(p,{type:o.value.needInvestigation?"warning":""},{default:t(()=>[i(f(o.value.needInvestigation?"需要调查":"无需调查"),1)]),_:1},8,["type"])]),_:1}),e(h,{label:"事件经过",span:2},{default:t(()=>[i(f(o.value.description),1)]),_:1}),e(h,{label:"产生影响",span:2},{default:t(()=>[i(f(o.value.impact),1)]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(q,{modelValue:$.value,"onUpdate:modelValue":a[26]||(a[26]=u=>$.value=u),title:"事件调查",width:"60%"},{footer:t(()=>[v("span",$t,[e(w,{onClick:a[25]||(a[25]=u=>$.value=!1)},{default:t(()=>a[41]||(a[41]=[i("取消")])),_:1}),e(w,{type:"primary",onClick:ee},{default:t(()=>a[42]||(a[42]=[i("提交")])),_:1})])]),default:t(()=>[e(Y,{ref_key:"investigateFormRef",ref:oe,model:M,rules:me,"label-width":"100px"},{default:t(()=>[e(b,{label:"调查结论",prop:"conclusion"},{default:t(()=>[e(x,{modelValue:M.conclusion,"onUpdate:modelValue":a[22]||(a[22]=u=>M.conclusion=u),type:"textarea",rows:4,placeholder:"请输入调查结论"},null,8,["modelValue"])]),_:1}),e(b,{label:"处理建议",prop:"suggestion"},{default:t(()=>[e(x,{modelValue:M.suggestion,"onUpdate:modelValue":a[23]||(a[23]=u=>M.suggestion=u),type:"textarea",rows:4,placeholder:"请输入处理建议"},null,8,["modelValue"])]),_:1}),e(b,{label:"预防措施",prop:"prevention"},{default:t(()=>[e(x,{modelValue:M.prevention,"onUpdate:modelValue":a[24]||(a[24]=u=>M.prevention=u),type:"textarea",rows:4,placeholder:"请输入预防措施"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}});const Ft=xe(Mt,[["__scopeId","data-v-cf999b9b"]]),Ot={class:"info-container"},At=Ue({__name:"index",setup(Ge){const m=c("voluntary");return(L,B)=>{const g=d("el-tab-pane"),z=d("el-tabs"),Q=d("el-card");return _(),R("div",Ot,[B[1]||(B[1]=v("div",{class:"page-header"},[v("h2",null,"信息管理")],-1)),e(Q,{class:"content-card"},{default:t(()=>[e(z,{modelValue:m.value,"onUpdate:modelValue":B[0]||(B[0]=G=>m.value=G)},{default:t(()=>[e(g,{name:"voluntary",label:"自愿报告"},{default:t(()=>[e(St)]),_:1}),e(g,{name:"mandatory",label:"强制报告"},{default:t(()=>[e(Ft)]),_:1})]),_:1},8,["modelValue"])]),_:1})])}}});const jt=xe(At,[["__scopeId","data-v-8d4b8a9c"]]);export{jt as default};
