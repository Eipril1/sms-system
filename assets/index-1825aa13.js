import{d as X,r as m,c as Y,b as x,e,f as t,h as d,i as Z,m as r,t as ee,E as A,z as y,_ as le}from"./index-97e706ba.js";const te={class:"responsibility-container"},ae={class:"page-header"},oe={class:"header-actions"},ne=X({__name:"index",setup(se){const C=m(),U=m(),b=m(!1),_=m(!1),g=m("add"),T=m("list"),f=m({level:"",department:""}),v=m({level:"",department:"",content:""}),n=m({period:"",department:"",assessor:"",score:0,result:"",comment:""}),E=m([{code:"RS001",level:"公司级",department:"安全监察部",content:"负责公司安全管理体系的建立和维护...",updateTime:"2024-01-15 10:00:00"},{code:"RS002",level:"部门级",department:"运行控制部",content:"确保部门安全运行管理规范的执行...",updateTime:"2024-01-14 15:30:00"}]),D=m([{period:"2024年第一季度",department:"安全监察部",assessor:"张三",score:95,result:"优秀",comment:"安全管理体系运行良好，各项指标达标",assessTime:"2024-03-31 14:00:00"}]),F={level:[{required:!0,message:"请选择责任层级",trigger:"change"}],department:[{required:!0,message:"请输入部门/岗位",trigger:"blur"}],content:[{required:!0,message:"请输入责任内容",trigger:"blur"}]},N={period:[{required:!0,message:"请输入考核周期",trigger:"blur"}],department:[{required:!0,message:"请输入考核部门",trigger:"blur"}],assessor:[{required:!0,message:"请输入考核人",trigger:"blur"}],score:[{required:!0,message:"请输入考核得分",trigger:"change"}],result:[{required:!0,message:"请选择考核结果",trigger:"change"}],comment:[{required:!0,message:"请输入考核意见",trigger:"blur"}]},h=o=>({优秀:"success",良好:"primary",合格:"warning",不合格:"danger"})[o]||"",q=()=>{console.log("搜索条件：",f.value)},L=()=>{f.value={level:"",department:""},q()},M=()=>{g.value="add",v.value={level:"",department:"",content:""},b.value=!0},z=()=>{n.value={period:"",department:"",assessor:"",score:0,result:"",comment:""},_.value=!0},I=o=>{g.value="edit",v.value={...o},b.value=!0},j=o=>{console.log("查看详情：",o)},G=o=>{console.log("查看考核记录：",o)},H=async o=>{try{await A.confirm("确认删除该责任清单？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),y.success("删除成功")}catch{console.log("取消删除")}},J=async o=>{try{await A.confirm("确认删除该考核记录？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),y.success("删除成功")}catch{console.log("取消删除")}},K=()=>{var o;(o=C.value)==null||o.validate(l=>{l&&(b.value=!1,y.success(g.value==="add"?"新增成功":"编辑成功"))})},O=()=>{var o;(o=U.value)==null||o.validate(l=>{l&&(_.value=!1,y.success("考核记录已保存"))})};return(o,l)=>{const u=d("el-button"),i=d("el-option"),w=d("el-select"),p=d("el-form-item"),c=d("el-input"),k=d("el-form"),B=d("el-card"),s=d("el-table-column"),R=d("el-table"),S=d("el-tab-pane"),P=d("el-tag"),Q=d("el-tabs"),$=d("el-dialog"),W=d("el-input-number");return Z(),Y("div",te,[x("div",ae,[l[18]||(l[18]=x("h2",null,"安全责任",-1)),x("div",oe,[e(u,{type:"primary",onClick:M},{default:t(()=>l[16]||(l[16]=[r("新增责任清单")])),_:1}),e(u,{type:"success",onClick:z},{default:t(()=>l[17]||(l[17]=[r("新增考核记录")])),_:1})])]),e(B,{class:"search-card"},{default:t(()=>[e(k,{inline:!0,model:f.value},{default:t(()=>[e(p,{label:"责任层级"},{default:t(()=>[e(w,{modelValue:f.value.level,"onUpdate:modelValue":l[0]||(l[0]=a=>f.value.level=a),placeholder:"请选择层级"},{default:t(()=>[e(i,{label:"公司级",value:"company"}),e(i,{label:"部门级",value:"department"}),e(i,{label:"岗位级",value:"position"})]),_:1},8,["modelValue"])]),_:1}),e(p,{label:"部门/岗位"},{default:t(()=>[e(c,{modelValue:f.value.department,"onUpdate:modelValue":l[1]||(l[1]=a=>f.value.department=a),placeholder:"请输入部门或岗位"},null,8,["modelValue"])]),_:1}),e(p,null,{default:t(()=>[e(u,{type:"primary",onClick:q},{default:t(()=>l[19]||(l[19]=[r("查询")])),_:1}),e(u,{onClick:L},{default:t(()=>l[20]||(l[20]=[r("重置")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(B,{class:"content-card"},{default:t(()=>[e(Q,{modelValue:T.value,"onUpdate:modelValue":l[2]||(l[2]=a=>T.value=a)},{default:t(()=>[e(S,{label:"责任清单",name:"list"},{default:t(()=>[e(R,{data:E.value,style:{width:"100%"}},{default:t(()=>[e(s,{prop:"code",label:"编号",width:"120"}),e(s,{prop:"level",label:"责任层级",width:"100"}),e(s,{prop:"department",label:"部门/岗位",width:"120"}),e(s,{prop:"content",label:"责任内容","min-width":"200","show-overflow-tooltip":""}),e(s,{prop:"updateTime",label:"更新时间",width:"180"}),e(s,{label:"操作",width:"200",fixed:"right"},{default:t(({row:a})=>[e(u,{link:"",type:"primary",onClick:V=>j(a)},{default:t(()=>l[21]||(l[21]=[r("查看")])),_:2},1032,["onClick"]),e(u,{link:"",type:"primary",onClick:V=>I(a)},{default:t(()=>l[22]||(l[22]=[r("编辑")])),_:2},1032,["onClick"]),e(u,{link:"",type:"danger",onClick:V=>H(a)},{default:t(()=>l[23]||(l[23]=[r("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1}),e(S,{label:"考核记录",name:"assessment"},{default:t(()=>[e(R,{data:D.value,style:{width:"100%"}},{default:t(()=>[e(s,{prop:"period",label:"考核周期",width:"120"}),e(s,{prop:"department",label:"考核部门",width:"120"}),e(s,{prop:"assessor",label:"考核人",width:"100"}),e(s,{prop:"score",label:"考核得分",width:"100"}),e(s,{prop:"result",label:"考核结果",width:"100"},{default:t(({row:a})=>[e(P,{type:h(a.result)},{default:t(()=>[r(ee(a.result),1)]),_:2},1032,["type"])]),_:1}),e(s,{prop:"comment",label:"考核意见","min-width":"200","show-overflow-tooltip":""}),e(s,{prop:"assessTime",label:"考核时间",width:"180"}),e(s,{label:"操作",width:"150",fixed:"right"},{default:t(({row:a})=>[e(u,{link:"",type:"primary",onClick:V=>G(a)},{default:t(()=>l[24]||(l[24]=[r("查看")])),_:2},1032,["onClick"]),e(u,{link:"",type:"danger",onClick:V=>J(a)},{default:t(()=>l[25]||(l[25]=[r("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})]),_:1},8,["modelValue"])]),_:1}),e($,{modelValue:b.value,"onUpdate:modelValue":l[7]||(l[7]=a=>b.value=a),title:g.value==="add"?"新增责任清单":"编辑责任清单",width:"600px"},{footer:t(()=>[e(u,{onClick:l[6]||(l[6]=a=>b.value=!1)},{default:t(()=>l[26]||(l[26]=[r("取消")])),_:1}),e(u,{type:"primary",onClick:K},{default:t(()=>l[27]||(l[27]=[r("确定")])),_:1})]),default:t(()=>[e(k,{ref_key:"formRef",ref:C,model:v.value,rules:F,"label-width":"100px"},{default:t(()=>[e(p,{label:"责任层级",prop:"level"},{default:t(()=>[e(w,{modelValue:v.value.level,"onUpdate:modelValue":l[3]||(l[3]=a=>v.value.level=a),placeholder:"请选择层级"},{default:t(()=>[e(i,{label:"公司级",value:"company"}),e(i,{label:"部门级",value:"department"}),e(i,{label:"岗位级",value:"position"})]),_:1},8,["modelValue"])]),_:1}),e(p,{label:"部门/岗位",prop:"department"},{default:t(()=>[e(c,{modelValue:v.value.department,"onUpdate:modelValue":l[4]||(l[4]=a=>v.value.department=a),placeholder:"请输入部门或岗位"},null,8,["modelValue"])]),_:1}),e(p,{label:"责任内容",prop:"content"},{default:t(()=>[e(c,{modelValue:v.value.content,"onUpdate:modelValue":l[5]||(l[5]=a=>v.value.content=a),type:"textarea",rows:4,placeholder:"请输入责任内容"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),e($,{modelValue:_.value,"onUpdate:modelValue":l[15]||(l[15]=a=>_.value=a),title:"新增考核记录",width:"600px"},{footer:t(()=>[e(u,{onClick:l[14]||(l[14]=a=>_.value=!1)},{default:t(()=>l[28]||(l[28]=[r("取消")])),_:1}),e(u,{type:"primary",onClick:O},{default:t(()=>l[29]||(l[29]=[r("确定")])),_:1})]),default:t(()=>[e(k,{ref_key:"assessmentFormRef",ref:U,model:n.value,rules:N,"label-width":"100px"},{default:t(()=>[e(p,{label:"考核周期",prop:"period"},{default:t(()=>[e(c,{modelValue:n.value.period,"onUpdate:modelValue":l[8]||(l[8]=a=>n.value.period=a),placeholder:"请输入考核周期"},null,8,["modelValue"])]),_:1}),e(p,{label:"考核部门",prop:"department"},{default:t(()=>[e(c,{modelValue:n.value.department,"onUpdate:modelValue":l[9]||(l[9]=a=>n.value.department=a),placeholder:"请输入考核部门"},null,8,["modelValue"])]),_:1}),e(p,{label:"考核人",prop:"assessor"},{default:t(()=>[e(c,{modelValue:n.value.assessor,"onUpdate:modelValue":l[10]||(l[10]=a=>n.value.assessor=a),placeholder:"请输入考核人"},null,8,["modelValue"])]),_:1}),e(p,{label:"考核得分",prop:"score"},{default:t(()=>[e(W,{modelValue:n.value.score,"onUpdate:modelValue":l[11]||(l[11]=a=>n.value.score=a),min:0,max:100},null,8,["modelValue"])]),_:1}),e(p,{label:"考核结果",prop:"result"},{default:t(()=>[e(w,{modelValue:n.value.result,"onUpdate:modelValue":l[12]||(l[12]=a=>n.value.result=a),placeholder:"请选择考核结果"},{default:t(()=>[e(i,{label:"优秀",value:"优秀"}),e(i,{label:"良好",value:"良好"}),e(i,{label:"合格",value:"合格"}),e(i,{label:"不合格",value:"不合格"})]),_:1},8,["modelValue"])]),_:1}),e(p,{label:"考核意见",prop:"comment"},{default:t(()=>[e(c,{modelValue:n.value.comment,"onUpdate:modelValue":l[13]||(l[13]=a=>n.value.comment=a),type:"textarea",rows:4,placeholder:"请输入考核意见"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}});const re=le(ne,[["__scopeId","data-v-90248665"]]);export{re as default};
