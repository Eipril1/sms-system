import{d as K,r as i,c as O,b as q,e,f as t,h as n,i as Q,m as r,t as W,E as X,z as w,_ as Y}from"./index-97e706ba.js";const Z={class:"improvement-container"},h={class:"page-header"},ee=K({__name:"index",setup(le){const f=i({type:"",status:""}),d=i({type:"",title:"",content:"",department:"",deadline:""}),v=i({progress:0,record:""}),g=i(!1),_=i(!1),c=i("add"),B={type:[{required:!0,message:"请选择改进类型",trigger:"change"}],title:[{required:!0,message:"请输入改进项",trigger:"blur"}],content:[{required:!0,message:"请输入改进内容",trigger:"blur"}],department:[{required:!0,message:"请输入责任部门",trigger:"blur"}],deadline:[{required:!0,message:"请选择完成期限",trigger:"change"}]},S={record:[{required:!0,message:"请输入跟踪记录",trigger:"blur"}]},x=i(),C=i(),$=o=>({ongoing:"primary",completed:"success",closed:"info"})[o]||"info",E=()=>{},R=()=>{f.value={type:"",status:""}},F=()=>{c.value="add",d.value={type:"",title:"",content:"",department:"",deadline:""},g.value=!0},M=o=>{c.value="edit",d.value={...o},g.value=!0},D=o=>{},I=o=>{v.value={progress:o.progress||0,record:""},_.value=!0},N=o=>{X.confirm("确认删除该改进项？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{w.success("删除成功")})},P=()=>{var o;(o=x.value)==null||o.validate(l=>{l&&(g.value=!1,w.success(c.value==="add"?"新增成功":"编辑成功"))})},z=()=>{var o;(o=C.value)==null||o.validate(l=>{l&&(_.value=!1,w.success("跟踪记录已保存"))})},A=i([{code:"IMP20240301",type:"流程优化",title:"优化安全检查流程",department:"安全部",deadline:"2024-04-01",status:"ongoing",progress:30},{code:"IMP20240302",type:"系统改进",title:"升级安全监控系统",department:"技术部",deadline:"2024-05-01",status:"ongoing",progress:50}]);return(o,l)=>{const s=n("el-button"),p=n("el-option"),y=n("el-select"),u=n("el-form-item"),V=n("el-form"),U=n("el-card"),m=n("el-table-column"),L=n("el-tag"),j=n("el-progress"),G=n("el-table"),b=n("el-input"),H=n("el-date-picker"),T=n("el-dialog"),J=n("el-slider");return Q(),O("div",Z,[q("div",h,[l[14]||(l[14]=q("h2",null,"持续改进",-1)),e(s,{type:"primary",onClick:F},{default:t(()=>l[13]||(l[13]=[r("新增改进项")])),_:1})]),e(U,{class:"search-card"},{default:t(()=>[e(V,{inline:!0,model:f.value},{default:t(()=>[e(u,{label:"改进类型"},{default:t(()=>[e(y,{modelValue:f.value.type,"onUpdate:modelValue":l[0]||(l[0]=a=>f.value.type=a),placeholder:"请选择改进类型"},{default:t(()=>[e(p,{label:"流程优化",value:"process"}),e(p,{label:"系统改进",value:"system"}),e(p,{label:"人员培训",value:"training"})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"状态"},{default:t(()=>[e(y,{modelValue:f.value.status,"onUpdate:modelValue":l[1]||(l[1]=a=>f.value.status=a),placeholder:"请选择状态"},{default:t(()=>[e(p,{label:"进行中",value:"ongoing"}),e(p,{label:"已完成",value:"completed"}),e(p,{label:"已关闭",value:"closed"})]),_:1},8,["modelValue"])]),_:1}),e(u,null,{default:t(()=>[e(s,{type:"primary",onClick:E},{default:t(()=>l[15]||(l[15]=[r("查询")])),_:1}),e(s,{onClick:R},{default:t(()=>l[16]||(l[16]=[r("重置")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(U,{class:"content-card"},{default:t(()=>[e(G,{data:A.value,style:{width:"100%"}},{default:t(()=>[e(m,{prop:"code",label:"编号",width:"120"}),e(m,{prop:"type",label:"改进类型",width:"120"}),e(m,{prop:"title",label:"改进项","min-width":"200","show-overflow-tooltip":""}),e(m,{prop:"department",label:"责任部门",width:"120"}),e(m,{prop:"deadline",label:"完成期限",width:"120"}),e(m,{prop:"status",label:"状态",width:"100"},{default:t(({row:a})=>[e(L,{type:$(a.status)},{default:t(()=>[r(W(a.status),1)]),_:2},1032,["type"])]),_:1}),e(m,{prop:"progress",label:"进度",width:"200"},{default:t(({row:a})=>[e(j,{percentage:a.progress},null,8,["percentage"])]),_:1}),e(m,{label:"操作",width:"250",fixed:"right"},{default:t(({row:a})=>[e(s,{link:"",type:"primary",onClick:k=>D(a)},{default:t(()=>l[17]||(l[17]=[r("查看")])),_:2},1032,["onClick"]),e(s,{link:"",type:"primary",onClick:k=>M(a)},{default:t(()=>l[18]||(l[18]=[r("编辑")])),_:2},1032,["onClick"]),e(s,{link:"",type:"success",onClick:k=>I(a)},{default:t(()=>l[19]||(l[19]=[r("跟踪")])),_:2},1032,["onClick"]),e(s,{link:"",type:"danger",onClick:k=>N(a)},{default:t(()=>l[20]||(l[20]=[r("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1}),e(T,{modelValue:g.value,"onUpdate:modelValue":l[8]||(l[8]=a=>g.value=a),title:c.value==="add"?"新增改进项":"编辑改进项",width:"600px"},{footer:t(()=>[e(s,{onClick:l[7]||(l[7]=a=>g.value=!1)},{default:t(()=>l[21]||(l[21]=[r("取消")])),_:1}),e(s,{type:"primary",onClick:P},{default:t(()=>l[22]||(l[22]=[r("确定")])),_:1})]),default:t(()=>[e(V,{ref_key:"formRef",ref:x,model:d.value,rules:B,"label-width":"100px"},{default:t(()=>[e(u,{label:"改进类型",prop:"type"},{default:t(()=>[e(y,{modelValue:d.value.type,"onUpdate:modelValue":l[2]||(l[2]=a=>d.value.type=a),placeholder:"请选择改进类型"},{default:t(()=>[e(p,{label:"流程优化",value:"process"}),e(p,{label:"系统改进",value:"system"}),e(p,{label:"人员培训",value:"training"})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"改进项",prop:"title"},{default:t(()=>[e(b,{modelValue:d.value.title,"onUpdate:modelValue":l[3]||(l[3]=a=>d.value.title=a),placeholder:"请输入改进项"},null,8,["modelValue"])]),_:1}),e(u,{label:"改进内容",prop:"content"},{default:t(()=>[e(b,{modelValue:d.value.content,"onUpdate:modelValue":l[4]||(l[4]=a=>d.value.content=a),type:"textarea",rows:3,placeholder:"请输入改进内容"},null,8,["modelValue"])]),_:1}),e(u,{label:"责任部门",prop:"department"},{default:t(()=>[e(b,{modelValue:d.value.department,"onUpdate:modelValue":l[5]||(l[5]=a=>d.value.department=a),placeholder:"请输入责任部门"},null,8,["modelValue"])]),_:1}),e(u,{label:"完成期限",prop:"deadline"},{default:t(()=>[e(H,{modelValue:d.value.deadline,"onUpdate:modelValue":l[6]||(l[6]=a=>d.value.deadline=a),type:"date",placeholder:"请选择完成期限"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),e(T,{modelValue:_.value,"onUpdate:modelValue":l[12]||(l[12]=a=>_.value=a),title:"跟踪记录",width:"500px"},{footer:t(()=>[e(s,{onClick:l[11]||(l[11]=a=>_.value=!1)},{default:t(()=>l[23]||(l[23]=[r("取消")])),_:1}),e(s,{type:"primary",onClick:z},{default:t(()=>l[24]||(l[24]=[r("确定")])),_:1})]),default:t(()=>[e(V,{ref_key:"trackFormRef",ref:C,model:v.value,rules:S,"label-width":"100px"},{default:t(()=>[e(u,{label:"完成进度",prop:"progress"},{default:t(()=>[e(J,{modelValue:v.value.progress,"onUpdate:modelValue":l[9]||(l[9]=a=>v.value.progress=a),step:10,"show-stops":""},null,8,["modelValue"])]),_:1}),e(u,{label:"跟踪记录",prop:"record"},{default:t(()=>[e(b,{modelValue:v.value.record,"onUpdate:modelValue":l[10]||(l[10]=a=>v.value.record=a),type:"textarea",rows:3,placeholder:"请输入跟踪记录"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}});const ae=Y(ee,[["__scopeId","data-v-1bf7030e"]]);export{ae as default};
