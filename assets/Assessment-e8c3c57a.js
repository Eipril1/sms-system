import{d as ee,r as i,c as le,b as _,e,f as t,h as m,i as te,m as d,t as F,E as S,z as C,_ as ae}from"./index-97e706ba.js";const oe={class:"assessment-container"},ne={class:"page-header"},de={class:"control-list"},re={class:"control-header"},ue=ee({__name:"Assessment",setup(se){const f=i({type:"",level:""}),s=i({type:"",description:"",probability:"",severity:"",department:""}),b=i(!1),x=i(!1),y=i(!1),V=i("add"),k=i("add"),h=i(),T=i(),$=i(null),v=i({type:"",content:"",responsible:"",deadline:"",status:"进行中"}),A=i([{type:"engineering",content:"安装防坠落护栏和安全网",responsible:"张三",deadline:"2024-03-01",status:"进行中"},{type:"management",content:"修订高空作业安全操作规程",responsible:"李四",deadline:"2024-02-15",status:"已完成"}]),D=i([{code:"R001",type:"运行风险",description:"跑道积水可能导致飞机滑出跑道",probability:"偶尔",severity:"危险",level:"高",department:"运行控制部",updateTime:"2024-01-15 10:00:00"}]),M={type:[{required:!0,message:"请选择风险类型",trigger:"change"}],description:[{required:!0,message:"请输入风险描述",trigger:"blur"}],probability:[{required:!0,message:"请选择发生概率",trigger:"change"}],severity:[{required:!0,message:"请选择严重程度",trigger:"change"}],department:[{required:!0,message:"请输入责任部门",trigger:"blur"}]},N={type:[{required:!0,message:"请选择措施类型",trigger:"change"}],content:[{required:!0,message:"请输入措施内容",trigger:"blur"}],responsible:[{required:!0,message:"请输入责任人",trigger:"blur"}],deadline:[{required:!0,message:"请选择完成期限",trigger:"change"}]},z=o=>({高:"danger",中:"warning",低:"success"})[o]||"info",I=o=>({进行中:"warning",已完成:"success",已关闭:"info"})[o]||"info",L=()=>{},j=()=>{f.value={type:"",level:""}},G=()=>{V.value="add",s.value={type:"",description:"",probability:"",severity:"",department:""},b.value=!0},H=o=>{V.value="edit",s.value={...o},b.value=!0},J=o=>{$.value=o},K=o=>{$.value=o,x.value=!0},O=()=>{k.value="add",v.value={type:"",content:"",responsible:"",deadline:"",status:"进行中"},y.value=!0},P=o=>{k.value="edit",v.value={...o},y.value=!0},Q=o=>{S.confirm("确认删除该管控措施？","提示",{type:"warning"}).then(()=>{C.success("删除成功")})},W=o=>{S.confirm("确认删除该风险记录？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{C.success("删除成功")})},X=()=>{var o;(o=h.value)==null||o.validate(l=>{l&&(b.value=!1,C.success(V.value==="add"?"新增成功":"编辑成功"))})},Y=()=>{var o;(o=T.value)==null||o.validate(l=>{l&&(y.value=!1,C.success(k.value==="add"?"新增成功":"编辑成功"))})};return(o,l)=>{const u=m("el-button"),n=m("el-option"),c=m("el-select"),p=m("el-form-item"),U=m("el-form"),R=m("el-card"),r=m("el-table-column"),B=m("el-tag"),E=m("el-table"),w=m("el-input"),q=m("el-dialog"),Z=m("el-date-picker");return te(),le("div",oe,[_("div",ne,[l[17]||(l[17]=_("h2",null,"风险识别与评估",-1)),e(u,{type:"primary",onClick:G},{default:t(()=>l[16]||(l[16]=[d("新增风险识别")])),_:1})]),e(R,{class:"search-card"},{default:t(()=>[e(U,{inline:!0,model:f.value},{default:t(()=>[e(p,{label:"风险类型"},{default:t(()=>[e(c,{modelValue:f.value.type,"onUpdate:modelValue":l[0]||(l[0]=a=>f.value.type=a),placeholder:"请选择风险类型"},{default:t(()=>[e(n,{label:"运行风险",value:"operation"}),e(n,{label:"维修风险",value:"maintenance"}),e(n,{label:"安保风险",value:"security"})]),_:1},8,["modelValue"])]),_:1}),e(p,{label:"风险等级"},{default:t(()=>[e(c,{modelValue:f.value.level,"onUpdate:modelValue":l[1]||(l[1]=a=>f.value.level=a),placeholder:"请选择风险等级"},{default:t(()=>[e(n,{label:"高",value:"high"}),e(n,{label:"中",value:"medium"}),e(n,{label:"低",value:"low"})]),_:1},8,["modelValue"])]),_:1}),e(p,null,{default:t(()=>[e(u,{type:"primary",onClick:L},{default:t(()=>l[18]||(l[18]=[d("查询")])),_:1}),e(u,{onClick:j},{default:t(()=>l[19]||(l[19]=[d("重置")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(R,{class:"content-card"},{default:t(()=>[e(E,{data:D.value,style:{width:"100%"}},{default:t(()=>[e(r,{prop:"code",label:"编号",width:"120"}),e(r,{prop:"type",label:"风险类型",width:"120"}),e(r,{prop:"description",label:"风险描述","min-width":"200","show-overflow-tooltip":""}),e(r,{prop:"probability",label:"发生概率",width:"100"}),e(r,{prop:"severity",label:"严重程度",width:"100"}),e(r,{prop:"level",label:"风险等级",width:"100"},{default:t(({row:a})=>[e(B,{type:z(a.level)},{default:t(()=>[d(F(a.level),1)]),_:2},1032,["type"])]),_:1}),e(r,{prop:"department",label:"责任部门",width:"120"}),e(r,{prop:"updateTime",label:"更新时间",width:"180"}),e(r,{label:"操作",width:"250",fixed:"right"},{default:t(({row:a})=>[e(u,{link:"",type:"primary",onClick:g=>J(a)},{default:t(()=>l[20]||(l[20]=[d("查看")])),_:2},1032,["onClick"]),e(u,{link:"",type:"primary",onClick:g=>H(a)},{default:t(()=>l[21]||(l[21]=[d("编辑")])),_:2},1032,["onClick"]),e(u,{link:"",type:"primary",onClick:g=>K(a)},{default:t(()=>l[22]||(l[22]=[d("管控")])),_:2},1032,["onClick"]),e(u,{link:"",type:"danger",onClick:g=>W(a)},{default:t(()=>l[23]||(l[23]=[d("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1}),e(q,{modelValue:b.value,"onUpdate:modelValue":l[8]||(l[8]=a=>b.value=a),title:V.value==="add"?"新增风险识别":"编辑风险识别",width:"600px"},{footer:t(()=>[e(u,{onClick:l[7]||(l[7]=a=>b.value=!1)},{default:t(()=>l[24]||(l[24]=[d("取消")])),_:1}),e(u,{type:"primary",onClick:X},{default:t(()=>l[25]||(l[25]=[d("确定")])),_:1})]),default:t(()=>[e(U,{ref_key:"formRef",ref:h,model:s.value,rules:M,"label-width":"100px"},{default:t(()=>[e(p,{label:"风险类型",prop:"type"},{default:t(()=>[e(c,{modelValue:s.value.type,"onUpdate:modelValue":l[2]||(l[2]=a=>s.value.type=a),placeholder:"请选择风险类型"},{default:t(()=>[e(n,{label:"运行风险",value:"operation"}),e(n,{label:"维修风险",value:"maintenance"}),e(n,{label:"安保风险",value:"security"})]),_:1},8,["modelValue"])]),_:1}),e(p,{label:"风险描述",prop:"description"},{default:t(()=>[e(w,{modelValue:s.value.description,"onUpdate:modelValue":l[3]||(l[3]=a=>s.value.description=a),type:"textarea",rows:3,placeholder:"请输入风险描述"},null,8,["modelValue"])]),_:1}),e(p,{label:"发生概率",prop:"probability"},{default:t(()=>[e(c,{modelValue:s.value.probability,"onUpdate:modelValue":l[4]||(l[4]=a=>s.value.probability=a),placeholder:"请选择发生概率"},{default:t(()=>[e(n,{label:"频繁",value:"frequent"}),e(n,{label:"偶尔",value:"occasional"}),e(n,{label:"极少",value:"rare"})]),_:1},8,["modelValue"])]),_:1}),e(p,{label:"严重程度",prop:"severity"},{default:t(()=>[e(c,{modelValue:s.value.severity,"onUpdate:modelValue":l[5]||(l[5]=a=>s.value.severity=a),placeholder:"请选择严重程度"},{default:t(()=>[e(n,{label:"灾难性",value:"catastrophic"}),e(n,{label:"危险",value:"hazardous"}),e(n,{label:"轻微",value:"minor"})]),_:1},8,["modelValue"])]),_:1}),e(p,{label:"责任部门",prop:"department"},{default:t(()=>[e(w,{modelValue:s.value.department,"onUpdate:modelValue":l[6]||(l[6]=a=>s.value.department=a),placeholder:"请输入责任部门"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),e(q,{modelValue:x.value,"onUpdate:modelValue":l[9]||(l[9]=a=>x.value=a),title:"管控措施",width:"600px"},{default:t(()=>[_("div",de,[_("div",re,[l[27]||(l[27]=_("h3",null,"已有管控措施",-1)),e(u,{type:"primary",onClick:O},{default:t(()=>l[26]||(l[26]=[d("新增管控措施")])),_:1})]),e(E,{data:A.value,style:{width:"100%"}},{default:t(()=>[e(r,{prop:"type",label:"措施类型",width:"120"}),e(r,{prop:"content",label:"措施内容","min-width":"200","show-overflow-tooltip":""}),e(r,{prop:"responsible",label:"责任人",width:"100"}),e(r,{prop:"deadline",label:"完成期限",width:"120"}),e(r,{prop:"status",label:"状态",width:"100"},{default:t(({row:a})=>[e(B,{type:I(a.status)},{default:t(()=>[d(F(a.status),1)]),_:2},1032,["type"])]),_:1}),e(r,{label:"操作",width:"150"},{default:t(({row:a})=>[e(u,{link:"",type:"primary",onClick:g=>P(a)},{default:t(()=>l[28]||(l[28]=[d("编辑")])),_:2},1032,["onClick"]),e(u,{link:"",type:"danger",onClick:g=>Q(a)},{default:t(()=>l[29]||(l[29]=[d("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])])]),_:1},8,["modelValue"]),e(q,{modelValue:y.value,"onUpdate:modelValue":l[15]||(l[15]=a=>y.value=a),title:k.value==="add"?"新增管控措施":"编辑管控措施",width:"500px"},{footer:t(()=>[e(u,{onClick:l[14]||(l[14]=a=>y.value=!1)},{default:t(()=>l[30]||(l[30]=[d("取消")])),_:1}),e(u,{type:"primary",onClick:Y},{default:t(()=>l[31]||(l[31]=[d("确定")])),_:1})]),default:t(()=>[e(U,{ref_key:"controlFormRef",ref:T,model:v.value,rules:N,"label-width":"100px"},{default:t(()=>[e(p,{label:"措施类型",prop:"type"},{default:t(()=>[e(c,{modelValue:v.value.type,"onUpdate:modelValue":l[10]||(l[10]=a=>v.value.type=a),placeholder:"请选择措施类型"},{default:t(()=>[e(n,{label:"工程措施",value:"engineering"}),e(n,{label:"管理措施",value:"management"}),e(n,{label:"培训措施",value:"training"})]),_:1},8,["modelValue"])]),_:1}),e(p,{label:"措施内容",prop:"content"},{default:t(()=>[e(w,{modelValue:v.value.content,"onUpdate:modelValue":l[11]||(l[11]=a=>v.value.content=a),type:"textarea",rows:3,placeholder:"请输入措施内容"},null,8,["modelValue"])]),_:1}),e(p,{label:"责任人",prop:"responsible"},{default:t(()=>[e(w,{modelValue:v.value.responsible,"onUpdate:modelValue":l[12]||(l[12]=a=>v.value.responsible=a),placeholder:"请输入责任人"},null,8,["modelValue"])]),_:1}),e(p,{label:"完成期限",prop:"deadline"},{default:t(()=>[e(Z,{modelValue:v.value.deadline,"onUpdate:modelValue":l[13]||(l[13]=a=>v.value.deadline=a),type:"date",placeholder:"请选择完成期限"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}});const pe=ae(ue,[["__scopeId","data-v-ce637255"]]);export{pe as default};
