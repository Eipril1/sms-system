import{d as O,r as i,c as P,b as R,e,f as t,h as r,i as Q,m as s,t as W,E as X,z as C,_ as Y}from"./index-97e706ba.js";const Z={class:"risk-control"},h={class:"page-header"},ee=O({__name:"RiskControl",setup(le){const f=i({type:"",status:""}),d=i({riskType:"",measure:"",department:"",deadline:""}),v=i({progress:0,record:""}),c=i(!1),_=i(!1),g=i("add"),w=i(),x=i(),q=i([{code:"C001",riskType:"运行风险",measure:"加强跑道巡查，及时清理积水",department:"场道维护部",deadline:"2024-03-31",status:"进行中",progress:30}]),B={riskType:[{required:!0,message:"请选择风险类型",trigger:"change"}],measure:[{required:!0,message:"请输入控制措施",trigger:"blur"}],department:[{required:!0,message:"请输入责任部门",trigger:"blur"}],deadline:[{required:!0,message:"请选择完成期限",trigger:"change"}]},S={progress:[{required:!0,message:"请设置当前进度",trigger:"change"}],record:[{required:!0,message:"请输入跟踪记录",trigger:"blur"}]},$=o=>({进行中:"primary",已完成:"success",已关闭:"info"})[o]||"info",E=()=>{},F=()=>{f.value={type:"",status:""}},D=()=>{g.value="add",d.value={riskType:"",measure:"",department:"",deadline:""},c.value=!0},N=o=>{g.value="edit",d.value={...o},c.value=!0},M=o=>{},z=o=>{v.value={progress:o.progress,record:""},_.value=!0},A=o=>{X.confirm("确认删除该控制措施？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{C.success("删除成功")})},I=()=>{var o;(o=w.value)==null||o.validate(l=>{l&&(c.value=!1,C.success(g.value==="add"?"新增成功":"编辑成功"))})},L=()=>{var o;(o=x.value)==null||o.validate(l=>{l&&(_.value=!1,C.success("跟踪记录已保存"))})};return(o,l)=>{const n=r("el-button"),u=r("el-option"),k=r("el-select"),p=r("el-form-item"),b=r("el-form"),T=r("el-card"),m=r("el-table-column"),j=r("el-tag"),G=r("el-progress"),H=r("el-table"),y=r("el-input"),J=r("el-date-picker"),U=r("el-dialog"),K=r("el-slider");return Q(),P("div",Z,[R("div",h,[l[13]||(l[13]=R("h2",null,"风险控制与跟踪",-1)),e(n,{type:"primary",onClick:D},{default:t(()=>l[12]||(l[12]=[s("新增控制措施")])),_:1})]),e(T,{class:"search-card"},{default:t(()=>[e(b,{inline:!0,model:f.value},{default:t(()=>[e(p,{label:"风险类型"},{default:t(()=>[e(k,{modelValue:f.value.type,"onUpdate:modelValue":l[0]||(l[0]=a=>f.value.type=a),placeholder:"请选择风险类型"},{default:t(()=>[e(u,{label:"运行风险",value:"operation"}),e(u,{label:"维修风险",value:"maintenance"}),e(u,{label:"安保风险",value:"security"})]),_:1},8,["modelValue"])]),_:1}),e(p,{label:"状态"},{default:t(()=>[e(k,{modelValue:f.value.status,"onUpdate:modelValue":l[1]||(l[1]=a=>f.value.status=a),placeholder:"请选择状态"},{default:t(()=>[e(u,{label:"进行中",value:"ongoing"}),e(u,{label:"已完成",value:"completed"}),e(u,{label:"已关闭",value:"closed"})]),_:1},8,["modelValue"])]),_:1}),e(p,null,{default:t(()=>[e(n,{type:"primary",onClick:E},{default:t(()=>l[14]||(l[14]=[s("查询")])),_:1}),e(n,{onClick:F},{default:t(()=>l[15]||(l[15]=[s("重置")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(T,{class:"content-card"},{default:t(()=>[e(H,{data:q.value,style:{width:"100%"}},{default:t(()=>[e(m,{prop:"code",label:"编号",width:"100"}),e(m,{prop:"riskType",label:"风险类型",width:"120"}),e(m,{prop:"measure",label:"控制措施","min-width":"200","show-overflow-tooltip":""}),e(m,{prop:"department",label:"责任部门",width:"120"}),e(m,{prop:"deadline",label:"完成期限",width:"120"}),e(m,{prop:"status",label:"状态",width:"100"},{default:t(({row:a})=>[e(j,{type:$(a.status)},{default:t(()=>[s(W(a.status),1)]),_:2},1032,["type"])]),_:1}),e(m,{prop:"progress",label:"进度",width:"200"},{default:t(({row:a})=>[e(G,{percentage:a.progress},null,8,["percentage"])]),_:1}),e(m,{label:"操作",width:"250",fixed:"right"},{default:t(({row:a})=>[e(n,{link:"",type:"primary",onClick:V=>M(a)},{default:t(()=>l[16]||(l[16]=[s("查看")])),_:2},1032,["onClick"]),e(n,{link:"",type:"primary",onClick:V=>N(a)},{default:t(()=>l[17]||(l[17]=[s("编辑")])),_:2},1032,["onClick"]),e(n,{link:"",type:"success",onClick:V=>z(a)},{default:t(()=>l[18]||(l[18]=[s("跟踪")])),_:2},1032,["onClick"]),e(n,{link:"",type:"danger",onClick:V=>A(a)},{default:t(()=>l[19]||(l[19]=[s("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1}),e(U,{modelValue:c.value,"onUpdate:modelValue":l[7]||(l[7]=a=>c.value=a),title:g.value==="add"?"新增控制措施":"编辑控制措施",width:"600px"},{footer:t(()=>[e(n,{onClick:l[6]||(l[6]=a=>c.value=!1)},{default:t(()=>l[20]||(l[20]=[s("取消")])),_:1}),e(n,{type:"primary",onClick:I},{default:t(()=>l[21]||(l[21]=[s("确定")])),_:1})]),default:t(()=>[e(b,{ref_key:"formRef",ref:w,model:d.value,rules:B,"label-width":"100px"},{default:t(()=>[e(p,{label:"风险类型",prop:"riskType"},{default:t(()=>[e(k,{modelValue:d.value.riskType,"onUpdate:modelValue":l[2]||(l[2]=a=>d.value.riskType=a),placeholder:"请选择风险类型"},{default:t(()=>[e(u,{label:"运行风险",value:"operation"}),e(u,{label:"维修风险",value:"maintenance"}),e(u,{label:"安保风险",value:"security"})]),_:1},8,["modelValue"])]),_:1}),e(p,{label:"控制措施",prop:"measure"},{default:t(()=>[e(y,{modelValue:d.value.measure,"onUpdate:modelValue":l[3]||(l[3]=a=>d.value.measure=a),type:"textarea",rows:3,placeholder:"请输入控制措施"},null,8,["modelValue"])]),_:1}),e(p,{label:"责任部门",prop:"department"},{default:t(()=>[e(y,{modelValue:d.value.department,"onUpdate:modelValue":l[4]||(l[4]=a=>d.value.department=a),placeholder:"请输入责任部门"},null,8,["modelValue"])]),_:1}),e(p,{label:"完成期限",prop:"deadline"},{default:t(()=>[e(J,{modelValue:d.value.deadline,"onUpdate:modelValue":l[5]||(l[5]=a=>d.value.deadline=a),type:"date",placeholder:"请选择完成期限"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),e(U,{modelValue:_.value,"onUpdate:modelValue":l[11]||(l[11]=a=>_.value=a),title:"跟踪记录",width:"600px"},{footer:t(()=>[e(n,{onClick:l[10]||(l[10]=a=>_.value=!1)},{default:t(()=>l[22]||(l[22]=[s("取消")])),_:1}),e(n,{type:"primary",onClick:L},{default:t(()=>l[23]||(l[23]=[s("确定")])),_:1})]),default:t(()=>[e(b,{ref_key:"trackFormRef",ref:x,model:v.value,rules:S,"label-width":"100px"},{default:t(()=>[e(p,{label:"当前进度",prop:"progress"},{default:t(()=>[e(K,{modelValue:v.value.progress,"onUpdate:modelValue":l[8]||(l[8]=a=>v.value.progress=a),step:10,"show-stops":""},null,8,["modelValue"])]),_:1}),e(p,{label:"跟踪记录",prop:"record"},{default:t(()=>[e(y,{modelValue:v.value.record,"onUpdate:modelValue":l[9]||(l[9]=a=>v.value.record=a),type:"textarea",rows:4,placeholder:"请输入跟踪记录"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}});const ae=Y(ee,[["__scopeId","data-v-79cbfc12"]]);export{ae as default};
